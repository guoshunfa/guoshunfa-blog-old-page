import{_ as s,o as n,c as a,e as t}from"./app.4659d0e0.js";const p={},o=t(`<h1 id="docker-容器添加新的端口映射" tabindex="-1"><a class="header-anchor" href="#docker-容器添加新的端口映射" aria-hidden="true">#</a> Docker - 容器添加新的端口映射</h1><p>转载自：https://blog.51cto.com/u_15228753/2818167</p><h2 id="step-1-查看容器哈希编码" tabindex="-1"><a class="header-anchor" href="#step-1-查看容器哈希编码" aria-hidden="true">#</a> step 1: 查看容器哈希编码</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> inspect centos-desktop-vnc <span class="token operator">|</span> <span class="token function">grep</span> Id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&quot;Id&quot;: &quot;22132e73736a5700dd5b4215a122310220fc3192b19754917caa1b83ecb89dd3&quot;,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="step-2-停止目标容器" tabindex="-1"><a class="header-anchor" href="#step-2-停止目标容器" aria-hidden="true">#</a> step 2: 停止目标容器</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> stop centos-desktop-vnc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="step-3-修改配置文件" tabindex="-1"><a class="header-anchor" href="#step-3-修改配置文件" aria-hidden="true">#</a> step 3: 修改配置文件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /var/lib/docker/containers/<span class="token operator">&lt;</span>容器Id<span class="token operator">&gt;</span>/hostconfig.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>加入映射配置</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;PortBindings&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
			<span class="token property">&quot;22/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;HostIp&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;HostPort&quot;</span><span class="token operator">:</span><span class="token string">&quot;10112&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;5901/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;HostIp&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;HostPort&quot;</span><span class="token operator">:</span><span class="token string">&quot;10113&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;3306/tcp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;HostIp&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;HostPort&quot;</span><span class="token operator">:</span><span class="token string">&quot;10114&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;5672/tcp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;HostIp&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;HostPort&quot;</span><span class="token operator">:</span><span class="token string">&quot;10115&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;6379/tcp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;HostIp&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;HostPort&quot;</span><span class="token operator">:</span><span class="token string">&quot;10116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;8080/tcp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;HostIp&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;HostPort&quot;</span><span class="token operator">:</span><span class="token string">&quot;10117&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token property">&quot;80/tcp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;HostIp&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;HostPort&quot;</span><span class="token operator">:</span><span class="token string">&quot;10118&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改下一个配置：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /var/lib/docker/containers/<span class="token operator">&lt;</span>容器Id<span class="token operator">&gt;</span>/config.v2.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>补齐配置：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;ExposedPorts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;22/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;5901/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;3306/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;5672/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;6379/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;8080/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;80/tcp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="step-4-重启docker服务" tabindex="-1"><a class="header-anchor" href="#step-4-重启docker服务" aria-hidden="true">#</a> step 4: 重启docker服务</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">service</span> <span class="token function">docker</span> restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="step-5-重启容器" tabindex="-1"><a class="header-anchor" href="#step-5-重启容器" aria-hidden="true">#</a> step 5: 重启容器</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> start centos-desktop-vnc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>访问响应的端口，查看是否映射成功。</p>`,20),e=[o];function c(u,r){return n(),a("div",null,e)}const i=s(p,[["render",c],["__file","11.docker-add-port.html.vue"]]);export{i as default};
