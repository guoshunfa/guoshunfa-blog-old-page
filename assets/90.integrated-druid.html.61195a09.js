import{_ as p,r as o,o as i,c as l,a as n,b as s,d as e,e as t}from"./app.4659d0e0.js";const c={},r=n("h1",{id:"druid数据库连接池和监控",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#druid数据库连接池和监控","aria-hidden":"true"},"#"),s(" Druid数据库连接池和监控")],-1),u={href:"https://github.com/alibaba/druid",target:"_blank",rel:"noopener noreferrer"},d=n("p",null,"Druid Spring Boot Starter 用于帮助你在Spring Boot项目中轻松集成Druid数据库连接池和监控。",-1),k=n("h2",{id:"如何使用",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#如何使用","aria-hidden":"true"},"#"),s(" 如何使用")],-1),v=n("code",null,"druid-spring-boot-starter",-1),m={href:"https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter",target:"_blank",rel:"noopener noreferrer"},b=t(`<p><code>Maven</code></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Gradle</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>compile &#39;com.alibaba:druid-spring-boot-starter:1.1.17&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,4),g=t(`<li><p>添加配置</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span> 
<span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span>
<span class="token comment"># ...其他配置（可选，不是必须的，使用内嵌数据库的话上述三项也可省略不填）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,1),q=t(`<h2 id="配置属性" tabindex="-1"><a class="header-anchor" href="#配置属性" aria-hidden="true">#</a> 配置属性</h2><p>Druid Spring Boot Starter 配置属性的名称完全遵照 Druid，你可以通过 Spring Boot 配置文件来配置Druid数据库连接池和监控，如果没有配置则使用默认值。</p><ul><li>JDBC 配置</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># 数据库地址</span>
<span class="token key attr-name">spring.datasource.druid.url</span><span class="token punctuation">=</span> <span class="token value attr-value"># 或spring.datasource.url= </span>
<span class="token comment"># 数据库用户名</span>
<span class="token key attr-name">spring.datasource.druid.username</span><span class="token punctuation">=</span> <span class="token value attr-value"># 或spring.datasource.username=</span>
<span class="token comment"># 数据库密码</span>
<span class="token key attr-name">spring.datasource.druid.password</span><span class="token punctuation">=</span> <span class="token value attr-value"># 或spring.datasource.password=</span>
<span class="token key attr-name">spring.datasource.druid.driver-class-name</span><span class="token punctuation">=</span> <span class="token value attr-value">#或 spring.datasource.driver-class-name=</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>连接池配置</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># 数据库连接池初始值</span>
<span class="token key attr-name">spring.datasource.druid.initial-size</span><span class="token punctuation">=</span>
<span class="token comment"># 数据库连接池最大值</span>
<span class="token key attr-name">spring.datasource.druid.max-active</span><span class="token punctuation">=</span>
<span class="token comment"># 数据库连接池最小空闲值</span>
<span class="token key attr-name">spring.datasource.druid.min-idle</span><span class="token punctuation">=</span>
<span class="token comment"># 获取连接时最大等待时间，单位毫秒(1分钟)</span>
<span class="token key attr-name">spring.datasource.druid.max-wait</span><span class="token punctuation">=</span>

<span class="token key attr-name">spring.datasource.druid.pool-prepared-statements</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.max-pool-prepared-statement-per-connection-size</span><span class="token punctuation">=</span> 
<span class="token key attr-name">spring.datasource.druid.max-open-prepared-statements</span><span class="token punctuation">=</span> <span class="token value attr-value">#和上面的等价</span>
<span class="token key attr-name">spring.datasource.druid.validation-query</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.validation-query-timeout</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.test-on-borrow</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.test-on-return</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.test-while-idle</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.time-between-eviction-runs-millis</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.min-evictable-idle-time-millis</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.max-evictable-idle-time-millis</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.filters</span><span class="token punctuation">=</span> <span class="token value attr-value">#配置多个英文逗号分隔</span>
....//more
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>监控配置</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># WebStatFilter配置，说明请参考Druid Wiki，配置_配置WebStatFilter</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.enabled</span><span class="token punctuation">=</span> <span class="token value attr-value">#是否启用StatFilter默认值false</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.url-pattern</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.exclusions</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.session-stat-enable</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.session-stat-max-count</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.principal-session-name</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.principal-cookie-name</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.web-stat-filter.profile-enable</span><span class="token punctuation">=</span>

<span class="token comment"># StatViewServlet配置，说明请参考Druid Wiki，配置_StatViewServlet配置</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.enabled</span><span class="token punctuation">=</span> <span class="token value attr-value">#是否启用StatViewServlet（监控页面）默认值为false（考虑到安全问题默认并未启动，如需启用建议设置密码或白名单以保障安全）</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.url-pattern</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.reset-enable</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.login-username</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.login-password</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.allow</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.druid.stat-view-servlet.deny</span><span class="token punctuation">=</span>

<span class="token comment"># Spring监控配置，说明请参考Druid Github Wiki，配置_Druid和Spring关联监控配置</span>
<span class="token key attr-name">spring.datasource.druid.aop-patterns</span><span class="token punctuation">=</span> <span class="token value attr-value"># Spring监控AOP切入点，如x.y.z.service.*,配置多个英文逗号分隔</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),h={href:"https://github.com/alibaba/druid/blob/master/src/main/java/com/alibaba/druid/pool/DruidDataSource.java",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"DruidDataSource",-1),f=n("code",null,"setter",-1),_=n("code",null,".properties",-1),S=n("code",null,".yml",-1),w=n("code",null,".yml",-1),C=t(`<h2 id="如何配置多数据源" tabindex="-1"><a class="header-anchor" href="#如何配置多数据源" aria-hidden="true">#</a> 如何配置多数据源</h2><ol><li>添加配置</li></ol><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span>
<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span>

<span class="token comment"># Druid 数据源配置，继承spring.datasource.* 配置，相同则覆盖</span>
...
<span class="token key attr-name">spring.datasource.druid.initial-size</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
<span class="token key attr-name">spring.datasource.druid.max-active</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
...

<span class="token comment"># Druid 数据源 1 配置，继承spring.datasource.druid.* 配置，相同则覆盖</span>
...
<span class="token key attr-name">spring.datasource.druid.one.max-active</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token key attr-name">spring.datasource.druid.one.max-wait</span><span class="token punctuation">=</span><span class="token value attr-value">10000</span>
...

<span class="token comment"># Druid 数据源 2 配置，继承spring.datasource.druid.* 配置，相同则覆盖</span>
...
<span class="token key attr-name">spring.datasource.druid.two.max-active</span><span class="token punctuation">=</span><span class="token value attr-value">20</span>
<span class="token key attr-name">spring.datasource.druid.two.max-wait</span><span class="token punctuation">=</span><span class="token value attr-value">20000</span>
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>强烈注意</strong>：Spring Boot 2.X 版本不再支持配置继承，多数据源的话每个数据源的所有配置都需要单独配置，否则配置不会生效</p><ol><li>创建数据源</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Primary</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;spring.datasource.druid.one&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSourceOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">DruidDataSourceBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;spring.datasource.druid.two&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSourceTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">DruidDataSourceBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="如何配置-filter" tabindex="-1"><a class="header-anchor" href="#如何配置-filter" aria-hidden="true">#</a> 如何配置 Filter</h2><p>你可以通过 <code>spring.datasource.druid.filters=stat,wall,log4j ...</code> 的方式来启用相应的内置Filter，不过这些Filter都是默认配置。如果默认配置不能满足你的需求，你可以放弃这种方式，通过配置文件来配置Filter，下面是例子。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># 配置StatFilter </span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.db-type</span><span class="token punctuation">=</span><span class="token value attr-value">h2</span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.log-slow-sql</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">spring.datasource.druid.filter.stat.slow-sql-millis</span><span class="token punctuation">=</span><span class="token value attr-value">2000</span>

<span class="token comment"># 配置WallFilter </span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.db-type</span><span class="token punctuation">=</span><span class="token value attr-value">h2</span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.config.delete-allow</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">spring.datasource.druid.filter.wall.config.drop-table-allow</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>

<span class="token comment"># 其他 Filter 配置不再演示</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>目前为以下 Filter 提供了配置支持，请参考文档或者根据IDE提示（<code>spring.datasource.druid.filter.*</code>）进行配置。</p><ul><li>StatFilter</li><li>WallFilter</li><li>ConfigFilter</li><li>EncodingConvertFilter</li><li>Slf4jLogFilter</li><li>Log4jFilter</li><li>Log4j2Filter</li><li>CommonsLogFilter</li></ul><p>要想使自定义 Filter 配置生效需要将对应 Filter 的 <code>enabled</code> 设置为 <code>true</code> ，Druid Spring Boot Starter 默认禁用 StatFilter，你也可以将其 <code>enabled</code> 设置为 <code>true</code> 来启用它。</p><h2 id="如何获取-druid-的监控数据" tabindex="-1"><a class="header-anchor" href="#如何获取-druid-的监控数据" aria-hidden="true">#</a> 如何获取 Druid 的监控数据</h2><p>Druid 的监控数据可以在开启 StatFilter 后通过 DruidStatManagerFacade 进行获取，获取到监控数据之后你可以将其暴露给你的监控系统进行使用。Druid 默认的监控系统数据也来源于此。下面给做一个简单的演示，在 Spring Boot 中如何通过 HTTP 接口将 Druid 监控数据以 JSON 的形式暴露出去，实际使用中你可以根据你的需要自由地对监控数据、暴露方式进行扩展。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidStatController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/druid/stat&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">druidStat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// DruidStatManagerFacade#getDataSourceStatDataList 该方法可以获取所有数据源的监控数据，除此之外 DruidStatManagerFacade 还提供了一些其他方法，你可以按需选择使用。</span>
        <span class="token keyword">return</span> <span class="token class-name">DruidStatManagerFacade</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDataSourceStatDataList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token string">&quot;Identity&quot;</span><span class="token operator">:</span> <span class="token number">1583082378</span><span class="token punctuation">,</span>
    <span class="token string">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DataSource-1583082378&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DbType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DriverClassName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;org.h2.Driver&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;URL&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jdbc:h2:file:./demo-db&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;UserName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sa&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FilterClassNames&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;com.alibaba.druid.filter.stat.StatFilter&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;WaitThreadCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NotEmptyWaitCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;NotEmptyWaitMillis&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PoolingCount&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PoolingPeak&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PoolingPeakTime&quot;</span><span class="token operator">:</span> <span class="token number">1533782955104</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ActiveCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ActivePeak&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ActivePeakTime&quot;</span><span class="token operator">:</span> <span class="token number">1533782955178</span><span class="token punctuation">,</span>
    <span class="token string">&quot;InitialSize&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MinIdle&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MaxActive&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token string">&quot;QueryTimeout&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TransactionQueryTimeout&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LoginTimeout&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ValidConnectionCheckerClassName&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ExceptionSorterClassName&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TestOnBorrow&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TestOnReturn&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TestWhileIdle&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DefaultAutoCommit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DefaultReadOnly&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">&quot;DefaultTransactionIsolation&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LogicConnectCount&quot;</span><span class="token operator">:</span> <span class="token number">103</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LogicCloseCount&quot;</span><span class="token operator">:</span> <span class="token number">103</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LogicConnectErrorCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PhysicalConnectCount&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PhysicalCloseCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PhysicalConnectErrorCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ExecuteCount&quot;</span><span class="token operator">:</span> <span class="token number">102</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ErrorCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;CommitCount&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&quot;RollbackCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PSCacheAccessCount&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PSCacheHitCount&quot;</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PSCacheMissCount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;StartTransactionCount&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&quot;TransactionHistogram&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token number">55</span><span class="token punctuation">,</span>
      <span class="token number">44</span><span class="token punctuation">,</span>
      <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token number">0</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ConnectionHoldTimeHistogram&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token number">53</span><span class="token punctuation">,</span>
      <span class="token number">47</span><span class="token punctuation">,</span>
      <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token number">0</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;RemoveAbandoned&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ClobOpenCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;BlobOpenCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;KeepAliveCheckCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;KeepAlive&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">&quot;FailFast&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MaxWait&quot;</span><span class="token operator">:</span> <span class="token number">1234</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MaxWaitThreadCount&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PoolPreparedStatements&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MaxPoolPreparedStatementPerConnectionSize&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MinEvictableIdleTimeMillis&quot;</span><span class="token operator">:</span> <span class="token number">30001</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MaxEvictableIdleTimeMillis&quot;</span><span class="token operator">:</span> <span class="token number">25200000</span><span class="token punctuation">,</span>
    <span class="token string">&quot;LogDifferentThread&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;RecycleErrorCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PreparedStatementOpenCount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">&quot;PreparedStatementClosedCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">&quot;UseUnfairLock&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">&quot;InitGlobalVariants&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">&quot;InitVariants&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ide-提示支持" tabindex="-1"><a class="header-anchor" href="#ide-提示支持" aria-hidden="true">#</a> IDE 提示支持</h2>`,16),D={href:"https://raw.githubusercontent.com/lihengming/java-codes/master/shared-resources/github-images/druid-spring-boot-starter-ide-hint.jpg",target:"_blank",rel:"noopener noreferrer"},x=n("img",{src:"https://file.pandacode.cn/blog/202211031429633.jpg",alt:"img"},null,-1),F=n("h2",{id:"演示",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#演示","aria-hidden":"true"},"#"),s(" 演示")],-1),P=n("p",null,[s("克隆项目，运行"),n("code",null,"test"),s("包内的"),n("code",null,"DemoApplication"),s("。")],-1),T=n("h2",{id:"文章参考",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#文章参考","aria-hidden":"true"},"#"),s(" 文章参考")],-1),I={href:"https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter",target:"_blank",rel:"noopener noreferrer"},B={href:"https://blog.csdn.net/yzh_1346983557/article/details/117673280",target:"_blank",rel:"noopener noreferrer"};function j(E,M){const a=o("ExternalLinkIcon");return i(),l("div",null,[r,n("blockquote",null,[n("p",null,[n("a",u,[s("druid 官网github地址"),e(a)])])]),d,k,n("ol",null,[n("li",null,[n("p",null,[s("在 Spring Boot 项目中加入"),v,s("依赖 ("),n("a",m,[s("点击查询最新版本"),e(a)]),s(")")]),b]),g]),q,n("p",null,[s("Druid Spring Boot Starter 不仅限于对以上配置属性提供支持，"),n("a",h,[y,e(a)]),s(" 内提供"),f,s("方法的可配置属性都将被支持。你可以参考WIKI文档或通过IDE输入提示来进行配置。配置文件的格式你可以选择"),_,s("或"),S,s("，效果是一样的，在配置较多的情况下推荐使用"),w,s("。")]),C,n("p",null,[n("a",D,[x,e(a)])]),F,P,T,n("ul",null,[n("li",null,[n("a",I,[s("druid 官方readme.md"),e(a)])]),n("li",null,[n("a",B,[s("springboot下使用druid-spring-boot-starter"),e(a)])])])])}const W=p(c,[["render",j],["__file","90.integrated-druid.html.vue"]]);export{W as default};
