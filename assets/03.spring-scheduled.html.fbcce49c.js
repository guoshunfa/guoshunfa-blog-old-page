import{_ as p,r as o,o as c,c as l,a as n,b as s,d as t,e}from"./app.4659d0e0.js";const i={},u=e('<h1 id="spring-调度任务" tabindex="-1"><a class="header-anchor" href="#spring-调度任务" aria-hidden="true">#</a> Spring - 调度任务</h1><h2 id="什么是调度任务" tabindex="-1"><a class="header-anchor" href="#什么是调度任务" aria-hidden="true">#</a> 什么是调度任务</h2><p><code>@Scheduled</code>将构建一个应用程序，通过使用 Spring 的注释每五秒打印一次当前时间。</p><h2 id="前提要求" tabindex="-1"><a class="header-anchor" href="#前提要求" aria-hidden="true">#</a> 前提要求</h2>',4),r=n("li",null,"最喜欢的文本编辑器或 IDE",-1),d={href:"http://www.oracle.com/technetwork/java/javase/downloads/index.html",target:"_blank",rel:"noopener noreferrer"},k={href:"http://www.gradle.org/downloads",target:"_blank",rel:"noopener noreferrer"},g={href:"https://maven.apache.org/download.cgi",target:"_blank",rel:"noopener noreferrer"},v=n("h2",{id:"如何完成调度任务",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#如何完成调度任务","aria-hidden":"true"},"#"),s(" 如何完成调度任务")],-1),m={href:"https://spring.io/guides",target:"_blank",rel:"noopener noreferrer"},h=n("strong",null,"从头开始",-1),b={href:"https://spring.io/guides/gs/scheduling-tasks/#scratch",target:"_blank",rel:"noopener noreferrer"},f=n("p",null,[s("要"),n("strong",null,"跳过基础知识"),s("，请执行以下操作：")],-1),_={href:"https://github.com/spring-guides/gs-scheduling-tasks/archive/main.zip",target:"_blank",rel:"noopener noreferrer"},w={href:"https://spring.io/understanding/Git",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"git clone https://github.com/spring-guides/gs-scheduling-tasks.git",-1),x=n("li",null,[s("光盘进入"),n("code",null,"gs-scheduling-tasks/initial")],-1),S={href:"https://spring.io/guides/gs/scheduling-tasks/#initial",target:"_blank",rel:"noopener noreferrer"},I=n("p",null,[n("strong",null,"完成后"),s("，您可以根据 中的代码检查结果"),n("code",null,"gs-scheduling-tasks/complete"),s("。")],-1),j=n("h2",{id:"从-spring-initializr-开始",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#从-spring-initializr-开始","aria-hidden":"true"},"#"),s(" 从 Spring Initializr 开始")],-1),A=n("p",null,"您可以使用这个[预初始化的项目](https://start.spring.io/#!type=maven-project&language=java&platformVersion=2.5.5&packaging=jar&jvmVersion=11&groupId=com.example&artifactId=scheduling-tasks&name=scheduling-tasks&description=Demo project for Spring Boot&packageName=com.example.scheduling-tasks)并单击生成以下载 ZIP 文件。该项目配置为适合本教程中的示例。",-1),T=n("p",null,"手动初始化项目：",-1),q={href:"https://start.spring.io/",target:"_blank",rel:"noopener noreferrer"},L=n("li",null,"选择 Gradle 或 Maven 以及您要使用的语言。本指南假定您选择了 Java。",-1),E=n("li",null,[s("单击"),n("strong",null,"生成"),s("。")],-1),N=n("li",null,"下载生成的 ZIP 文件，它是根据您的选择配置的 Web 应用程序的存档。",-1),R=e(`<table><thead><tr><th></th><th>如果您的 IDE 集成了 Spring Initializr，您可以从 IDE 中完成此过程。</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><table><thead><tr><th></th><th>您还可以从 Github 中 fork 项目并在您的 IDE 或其他编辑器中打开它。</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><h3 id="添加awaitility依赖项-可不添加" tabindex="-1"><a class="header-anchor" href="#添加awaitility依赖项-可不添加" aria-hidden="true">#</a> 添加<code>awaitility</code>依赖项（可不添加）</h3><p>中的测试<code>complete/src/test/java/com/example/schedulingtasks/ScheduledTasksTest.java</code>需要<code>awaitility</code>库。</p><table><thead><tr><th></th><th>库的更高版本<code>awaitility</code>不适用于此测试，因此您必须指定版本 3.1.2。</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><p>要将<code>awaitility</code>库添加到 Maven，请添加以下依赖项：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.awaitility<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>awaitility<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下清单显示了完成的<code>pom.xml</code>文件：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>scheduling-tasks-complete<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>scheduling-tasks-complete<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.awaitility<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>awaitility<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要将<code>awaitility</code>库添加到 Gradle，请添加以下依赖项：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>	testImplementation &#39;org.awaitility:awaitility:3.1.2&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以下清单显示了完成的<code>build.gradle</code>文件：</p><div class="language-gradle line-numbers-mode" data-ext="gradle"><pre class="language-gradle"><code><span class="token keyword">plugins</span> <span class="token punctuation">{</span>
	id <span class="token string">&#39;org.springframework.boot&#39;</span> version <span class="token string">&#39;2.7.1&#39;</span>
	id <span class="token string">&#39;io.spring.dependency-management&#39;</span> version <span class="token string">&#39;1.0.11.RELEASE&#39;</span>
	id <span class="token string">&#39;java&#39;</span>
<span class="token punctuation">}</span>

group <span class="token operator">=</span> <span class="token string">&#39;com.example&#39;</span>
version <span class="token operator">=</span> <span class="token string">&#39;0.0.1-SNAPSHOT&#39;</span>
sourceCompatibility <span class="token operator">=</span> <span class="token string">&#39;1.8&#39;</span>

<span class="token keyword">repositories</span> <span class="token punctuation">{</span>
	<span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">dependencies</span> <span class="token punctuation">{</span>
	<span class="token keyword">implementation</span> <span class="token string">&#39;org.springframework.boot:spring-boot-starter&#39;</span>
	testImplementation <span class="token string">&#39;org.awaitility:awaitility:3.1.2&#39;</span>
	<span class="token function">testImplementation</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.boot:spring-boot-starter-test&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

test <span class="token punctuation">{</span>
	<span class="token function">useJUnitPlatform</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建计划任务" tabindex="-1"><a class="header-anchor" href="#创建计划任务" aria-hidden="true">#</a> 创建计划任务</h2><p>现在您已经设置了您的项目，您可以创建计划任务。以下清单（来自<code>src/main/java/com/example/schedulingtasks/ScheduledTasks.java</code>）显示了如何执行此操作：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">/*
 * Copyright 2012-2015 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *	  https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>schedulingtasks</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Scheduled</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ScheduledTasks</span> <span class="token punctuation">{</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">ScheduledTasks</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">SimpleDateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>fixedRate <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reportCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;The time is now {}&quot;</span><span class="token punctuation">,</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Scheduled</code>注释定义特定方法何时运行。</p>`,17),D=n("th",null,null,-1),C=n("code",null,"fixedRate",-1),F={href:"https://docs.spring.io/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-scheduled",target:"_blank",rel:"noopener noreferrer"},J=n("code",null,"fixedDelay",-1),O={href:"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html",target:"_blank",rel:"noopener noreferrer"},B=n("code",null,'@Scheduled(cron=". . .")',-1),G=n("tbody",null,[n("tr",null,[n("td"),n("td")])],-1),M=e(`<h2 id="启用调度" tabindex="-1"><a class="header-anchor" href="#启用调度" aria-hidden="true">#</a> 启用调度</h2><p>尽管计划任务可以嵌入到 Web 应用程序和 WAR 文件中，但更简单的方法（在下一个清单中显示）创建一个独立的应用程序。为此，将所有内容打包到一个可执行的 JAR 文件中，由一个很好的旧 Java<code>main()</code>方法驱动。以下清单（来自<code>src/main/java/com/example/schedulingtasks/SchedulingTasksApplication.java</code>）显示了应用程序类：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>schedulingtasks</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableScheduling</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableScheduling</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SchedulingTasksApplication</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SchedulingTasksApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@SpringBootApplication</code>是一个方便的注解，它添加了以下所有内容：</p><ul><li><code>@Configuration</code>：将类标记为应用程序上下文的 bean 定义源。</li><li><code>@EnableAutoConfiguration</code>：告诉 Spring Boot 开始添加基于类路径设置、其他 bean 和各种属性设置的 bean。例如，如果<code>spring-webmvc</code>在类路径上，此注释将应用程序标记为 Web 应用程序并激活关键行为，例如设置<code>DispatcherServlet</code>.</li><li><code>@ComponentScan</code>：告诉 Spring 在包中寻找其他组件、配置和服务<code>com/example</code>，让它找到控制器。</li></ul><p>该<code>main()</code>方法使用 Spring Boot 的<code>SpringApplication.run()</code>方法来启动应用程序。您是否注意到没有一行 XML？也没有<code>web.xml</code>文件。此 Web 应用程序是 100% 纯 Java，您无需处理任何管道或基础设施的配置。</p>`,6),V={href:"https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#scheduling-enable-annotation-support",target:"_blank",rel:"noopener noreferrer"},P=n("code",null,"@EnableScheduling",-1),W=e(`<h3 id="构建可执行-jar" tabindex="-1"><a class="header-anchor" href="#构建可执行-jar" aria-hidden="true">#</a> 构建可执行 JAR</h3><p>您可以使用 Gradle 或 Maven 从命令行运行应用程序。您还可以构建一个包含所有必要依赖项、类和资源的可执行 JAR 文件并运行它。构建可执行 jar 可以轻松地将服务作为应用程序在整个开发生命周期中跨不同环境等进行发布、版本控制和部署。</p><p>如果您使用 Gradle，则可以使用<code>./gradlew bootRun</code>. 或者，您可以使用 构建 JAR 文件<code>./gradlew build</code>，然后运行 JAR 文件，如下所示：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> build/libs/gs-scheduling-tasks-0.1.0.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果您使用 Maven，则可以使用<code>./mvnw spring-boot:run</code>. 或者，您可以构建 JAR 文件，<code>./mvnw clean package</code>然后运行 JAR 文件，如下所示：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> 目标/gs-scheduling-tasks-0.1.0.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,6),z=n("th",null,null,-1),H={href:"https://spring.io/guides/gs/convert-jar-to-war/",target:"_blank",rel:"noopener noreferrer"},U=n("tbody",null,[n("tr",null,[n("td"),n("td")])],-1),K=e(`<p>显示日志输出，从日志可以看出是在后台线程上。您应该会看到您的计划任务每五秒触发一次。以下清单显示了典型的输出：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>...
2019-10-02 12:07:35.659  INFO 28617 --- [   scheduling-1] c.e.schedulingtasks.ScheduledTasks       : The time is now 12:07:35
2019-10-02 12:07:40.659  INFO 28617 --- [   scheduling-1] c.e.schedulingtasks.ScheduledTasks       : The time is now 12:07:40
2019-10-02 12:07:45.659  INFO 28617 --- [   scheduling-1] c.e.schedulingtasks.ScheduledTasks       : The time is now 12:07:45
2019-10-02 12:07:50.657  INFO 28617 --- [   scheduling-1] c.e.schedulingtasks.ScheduledTasks       : The time is now 12:07:50
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考文档" tabindex="-1"><a class="header-anchor" href="#参考文档" aria-hidden="true">#</a> 参考文档</h2>`,3),X={href:"https://spring.io/guides/gs/scheduling-tasks/",target:"_blank",rel:"noopener noreferrer"};function Y(Z,Q){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("ul",null,[r,n("li",null,[n("a",d,[s("JDK 1.8"),t(a)]),s("或更高版本")]),n("li",null,[n("a",k,[s("Gradle 4+"),t(a)]),s("或"),n("a",g,[s("Maven 3.2+"),t(a)])])]),v,n("p",null,[s("与大多数 Spring"),n("a",m,[s("入门指南"),t(a)]),s("一样，您可以从头开始并完成每个步骤，也可以绕过您已经熟悉的基本设置步骤。无论哪种方式，您最终都会得到有效的代码。")]),n("p",null,[s("要"),h,s("，请转到"),n("a",b,[s("从 Spring Initializr 开始"),t(a)]),s("。")]),f,n("ul",null,[n("li",null,[n("a",_,[s("下载"),t(a)]),s("并解压缩本指南的源存储库，或使用"),n("a",w,[s("Git"),t(a)]),s("克隆它："),y]),x,n("li",null,[s("跳到"),n("a",S,[s("创建计划任务"),t(a)]),s("。")])]),I,j,A,T,n("ol",null,[n("li",null,[s("导航到"),n("a",q,[s("https://start.spring.io"),t(a)]),s("。该服务会引入应用程序所需的所有依赖项，并为您完成大部分设置。")]),L,E,N]),R,n("table",null,[n("thead",null,[n("tr",null,[D,n("th",null,[s("此示例使用"),C,s("，它指定方法调用之间的间隔，从每次调用的开始时间开始计算。还有"),n("a",F,[s("其他选项"),t(a)]),s("，例如"),J,s("，它指定从任务完成开始计算的调用间隔。您还可以使用"),n("a",O,[B,t(a)]),s("表达式进行更复杂的任务调度。")])])]),G]),M,n("p",null,[n("a",V,[P,t(a)]),s("注释确保创建后台任务执行器。没有它，什么都无法安排。")]),W,n("table",null,[n("thead",null,[n("tr",null,[z,n("th",null,[s("此处描述的步骤创建了一个可运行的 JAR。您还可以"),n("a",H,[s("构建经典的 WAR 文件"),t(a)]),s("。")])])]),U]),K,n("ul",null,[n("li",null,[n("a",X,[s("spring官网"),t(a)])])])])}const nn=p(i,[["render",Y],["__file","03.spring-scheduled.html.vue"]]);export{nn as default};
