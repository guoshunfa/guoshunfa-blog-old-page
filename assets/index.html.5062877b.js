import{_ as p,r as c,o as i,c as o,a as n,b as s,d as e,e as t}from"./app.4659d0e0.js";const l={},u=n("h1",{id:"webç»„ä»¶åº“-pubsubjs-æ¶ˆæ¯å‘å¸ƒè®¢é˜…",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#webç»„ä»¶åº“-pubsubjs-æ¶ˆæ¯å‘å¸ƒè®¢é˜…","aria-hidden":"true"},"#"),s(" Webç»„ä»¶åº“ - PubSubJS æ¶ˆæ¯å‘å¸ƒè®¢é˜…")],-1),r={href:"https://github.com/mroderick/PubSubJS",target:"_blank",rel:"noopener noreferrer"},d=n("h3",{id:"_1-pubsubjs-ä»‹ç»",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-pubsubjs-ä»‹ç»","aria-hidden":"true"},"#"),s(" 1. PubSubJS ä»‹ç»")],-1),k={href:"http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern#Message_filtering",target:"_blank",rel:"noopener noreferrer"},b={href:"http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern#Message_filtering",target:"_blank",rel:"noopener noreferrer"},v={href:"http://en.wikipedia.org/wiki/Publish/subscribe",target:"_blank",rel:"noopener noreferrer"},m=n("p",null,"PubSubJSå…·æœ‰åŒæ­¥è§£è€¦ï¼Œå› æ­¤ä¸»é¢˜æ˜¯å¼‚æ­¥å‘å¸ƒçš„ã€‚è¿™æœ‰åŠ©äºä¿æŒç¨‹åºçš„å¯é¢„æµ‹æ€§ï¼Œå› ä¸ºåœ¨æ¶ˆè´¹è€…å¤„ç†ä¸»é¢˜æ—¶ï¼Œä¸»é¢˜çš„å‘èµ·è€…ä¸ä¼šè¢«é˜»æ­¢ã€‚",-1),h=n("p",null,"å¯¹äºå†’é™©å®¶æ¥è¯´ï¼ŒPubSubJSè¿˜æ”¯æŒåŒæ­¥ä¸»é¢˜å‘å¸ƒã€‚è¿™å¯èƒ½ä¼šåœ¨æŸäº›ç¯å¢ƒä¸­ï¼ˆæµè§ˆå™¨ï¼Œä¸æ˜¯æ‰€æœ‰ç¯å¢ƒï¼‰åŠ å¿«é€Ÿåº¦ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´ä¸€äº›éå¸¸éš¾ä»¥æ¨ç†çš„ç¨‹åºï¼Œå³ä¸€ä¸ªä¸»é¢˜è§¦å‘åŒä¸€æ‰§è¡Œé“¾ä¸­å¦ä¸€ä¸ªä¸»é¢˜çš„å‘å¸ƒã€‚",-1),g=n("h4",{id:"å•ä¸€æµç¨‹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å•ä¸€æµç¨‹","aria-hidden":"true"},"#"),s(" å•ä¸€æµç¨‹")],-1),_=n("strong",null,"å•ä¸ªè¿›ç¨‹",-1),f={href:"http://nodejs.org/api/cluster.html",target:"_blank",rel:"noopener noreferrer"},S={href:"http://nodejs.org/api/cluster.html",target:"_blank",rel:"noopener noreferrer"},P={href:"http://redis.io/topics/pubsub",target:"_blank",rel:"noopener noreferrer"},j=t('<h4 id="ä¸»è¦åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#ä¸»è¦åŠŸèƒ½" aria-hidden="true">#</a> ä¸»è¦åŠŸèƒ½</h4><ul><li>æ— ä¾èµ–é¡¹</li><li>åŒæ­¥è§£è€¦</li><li>ES3å…¼å®¹ã€‚PubSubJSåº”è¯¥èƒ½å¤Ÿåœ¨å¯ä»¥æ‰§è¡ŒJavaScriptçš„ä»»ä½•åœ°æ–¹è¿è¡Œã€‚æµè§ˆå™¨ã€æœåŠ¡å™¨ã€ç”µå­ä¹¦é˜…è¯»å™¨ã€æ—§æ‰‹æœºã€æ¸¸æˆæœºã€‚</li><li>AMD/CommonJSæ¨¡å—æ”¯æŒ</li><li>ä¸ä¿®æ”¹è®¢é˜…è€…ï¼ˆjQueryè‡ªå®šä¹‰äº‹ä»¶ä¿®æ”¹è®¢é˜…è€…ï¼‰</li><li>æ˜“äºç†è§£å’Œä½¿ç”¨ï¼ˆæ„Ÿè°¢åŒæ­¥è§£è€¦ï¼‰</li><li>å°ï¼ˆç•¥å·ï¼‰ï¼Œå°äº1kbçš„ç¼©å°å’Œgzipped</li></ul><h2 id="_2-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_2-å®‰è£…" aria-hidden="true">#</a> 2. å®‰è£…</h2><p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è·å–PubSubJS</p>',4),y=t("<li><p>é€šè¿‡npmå®‰è£…ï¼ˆ<code>npm install pubsub-js</code>ï¼‰</p><ul><li>é€šè¿‡yarnå®‰è£…ï¼ˆ<code>yarn add pubsub-js</code>ï¼‰</li></ul></li><li><p>ç›´æ¥ä»CDNä½¿ç”¨</p><ul><li>http://www.jsdelivr.com/#!pubsubjs</li><li>https://cdnjs.com/libraries/pubsub-js</li><li>https://unpkg.com/pubsub-js</li></ul></li>",2),x={href:"https://github.com/mroderick/PubSubJS/tags",target:"_blank",rel:"noopener noreferrer"},w=t(`<h2 id="_3-å¯¼å…¥" tabindex="-1"><a class="header-anchor" href="#_3-å¯¼å…¥" aria-hidden="true">#</a> 3. å¯¼å…¥</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>import PubSub from &#39;pubsub-js&#39;

// or when using CommonJS
const PubSub = require(&#39;pubsub-js&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-api-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_4-api-ä½¿ç”¨" aria-hidden="true">#</a> 4. API ä½¿ç”¨</h2><h3 id="_4-1-åŸºæœ¬ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#_4-1-åŸºæœ¬ç¤ºä¾‹" aria-hidden="true">#</a> 4.1. åŸºæœ¬ç¤ºä¾‹</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//åˆ›å»ºä¸€ä¸ªè®¢é˜…ä¸»é¢˜çš„å‡½æ•°</span>
<span class="token keyword">var</span> <span class="token function-variable function">mySubscriber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment">// å°†è¯¥åŠŸèƒ½æ·»åŠ åˆ°ç‰¹å®šä¸»é¢˜çš„è®¢é˜…è€…åˆ—è¡¨ä¸­</span>
<span class="token comment">// æˆ‘ä»¬ä¿ç•™äº†è¿”å›çš„ä»¤ç‰Œï¼Œä»¥ä¾¿èƒ½å¤Ÿå–æ¶ˆè®¢é˜…</span>
<span class="token comment">// ä»åé¢çš„ä¸»é¢˜å¼€å§‹</span>
<span class="token keyword">var</span> token <span class="token operator">=</span> PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;MY TOPIC&#39;</span><span class="token punctuation">,</span> mySubscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//å¼‚æ­¥å‘å¸ƒä¸»é¢˜</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&quot;MY TOPIC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä½ å¥½ï¼Œä¸–ç•Œï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//åŒæ­¥å‘å¸ƒä¸»é¢˜ï¼Œè¿™åœ¨æŸäº›ç¯å¢ƒä¸­æ›´å¿«ï¼Œ</span>
<span class="token comment">// ä½†å½“ä¸€ä¸ªä¸»é¢˜è§¦å‘äº†</span>
<span class="token comment">// ç›¸åŒçš„æ‰§è¡Œé“¾</span>
<span class="token comment">// å°å¿ƒä½¿ç”¨ï¼Œè¿™æ˜¯é¾™ï¼ï¼ï¼</span>
PubSub<span class="token punctuation">.</span><span class="token function">publishSync</span><span class="token punctuation">(</span><span class="token string">&quot;MY TOPIC&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ä½ å¥½ï¼Œä¸–ç•Œï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-å–æ¶ˆç‰¹å®šè®¢é˜…" tabindex="-1"><a class="header-anchor" href="#_4-2-å–æ¶ˆç‰¹å®šè®¢é˜…" aria-hidden="true">#</a> 4.2. å–æ¶ˆç‰¹å®šè®¢é˜…</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ¥æ”¶ä¸»é¢˜</span>
<span class="token keyword">var</span> <span class="token function-variable function">mySubscriber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment">//å°†è¯¥å‡½æ•°æ·»åŠ åˆ°ç‰¹å®šä¸»é¢˜çš„è®¢é˜…è€…åˆ—è¡¨ä¸­</span>
<span class="token comment">// æˆ‘ä»¬ä¿ç•™äº†è¿”å›çš„ä»¤ç‰Œï¼Œä»¥ä¾¿èƒ½å¤Ÿå–æ¶ˆè®¢é˜…</span>
<span class="token comment">// ä»åé¢çš„ä¸»é¢˜å¼€å§‹</span>
<span class="token keyword">var</span> token <span class="token operator">=</span> PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;MY TOPIC&#39;</span><span class="token punctuation">,</span> mySubscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//å–æ¶ˆè®¢é˜…æ­¤è®¢é˜…è€…æ­¤ä¸»é¢˜</span>
PubSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-å–æ¶ˆåŠŸèƒ½çš„æ‰€æœ‰è®¢é˜…" tabindex="-1"><a class="header-anchor" href="#_4-3-å–æ¶ˆåŠŸèƒ½çš„æ‰€æœ‰è®¢é˜…" aria-hidden="true">#</a> 4.3. å–æ¶ˆåŠŸèƒ½çš„æ‰€æœ‰è®¢é˜…</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ¥æ”¶ä¸»é¢˜</span>
<span class="token keyword">var</span> <span class="token function-variable function">mySubscriber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment">//å–æ¶ˆè®¢é˜…mySubscriberçš„æ‰€æœ‰ä¸»é¢˜</span>
PubSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span>mySubscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-æ¸…é™¤ä¸»é¢˜çš„æ‰€æœ‰è®¢é˜…" tabindex="-1"><a class="header-anchor" href="#_4-4-æ¸…é™¤ä¸»é¢˜çš„æ‰€æœ‰è®¢é˜…" aria-hidden="true">#</a> 4.4. æ¸…é™¤ä¸»é¢˜çš„æ‰€æœ‰è®¢é˜…</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> myFunc1<span class="token punctuation">)</span><span class="token punctuation">;</span>
PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;a.b&#39;</span><span class="token punctuation">,</span> myFunc2<span class="token punctuation">)</span><span class="token punctuation">;</span>
PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;a.b.c&#39;</span><span class="token punctuation">,</span> myFunc3<span class="token punctuation">)</span><span class="token punctuation">;</span>

PubSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token string">&#39;a.b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ²¡æœ‰å…³äºâ€œa.bâ€å’Œâ€œa.b.câ€ä¸»é¢˜çš„è¿›ä¸€æ­¥é€šçŸ¥</span>
<span class="token comment">//â€œaâ€çš„é€šçŸ¥ä»å°†å‘å¸ƒ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-æ¸…é™¤æ‰€æœ‰è®¢é˜…" tabindex="-1"><a class="header-anchor" href="#_4-5-æ¸…é™¤æ‰€æœ‰è®¢é˜…" aria-hidden="true">#</a> 4.5. æ¸…é™¤æ‰€æœ‰è®¢é˜…</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>PubSub<span class="token punctuation">.</span><span class="token function">clearAllSubscriptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ‰€æœ‰è®¢é˜…å‡å·²åˆ é™¤</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-6-è·å–è®¢é˜…" tabindex="-1"><a class="header-anchor" href="#_4-6-è·å–è®¢é˜…" aria-hidden="true">#</a> 4.6. è·å–è®¢é˜…</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>PubSub<span class="token punctuation">.</span><span class="token function">getSubscriptions</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æŒ‰ä»£å¸ä»æ‰€æœ‰ä¸»é¢˜è®¢é˜…</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-è®¡æ•°è®¢é˜…" tabindex="-1"><a class="header-anchor" href="#_4-7-è®¡æ•°è®¢é˜…" aria-hidden="true">#</a> 4.7. è®¡æ•°è®¢é˜…</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>PubSub<span class="token punctuation">.</span><span class="token function">countSubscriptions</span><span class="token punctuation">(</span><span class="token string">&#39;token&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æŒ‰æ‰€æœ‰ä¸»é¢˜çš„ä»¤ç‰Œè®¡æ•°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-8-é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_4-8-é”™è¯¯å¤„ç†" aria-hidden="true">#</a> 4.8. é”™è¯¯å¤„ç†</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// isPublishedæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æœ‰è®¢é˜…è€…æ³¨å†Œäº†æ­¤ä¸»é¢˜</span>
<span class="token keyword">var</span> isPublished <span class="token operator">=</span> PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¦‚æœå‡ºç°é—®é¢˜ï¼Œä¸”è®¢é˜…è€…æœªæ³¨å†Œï¼Œä»¤ç‰Œå°†æ˜¯å‡çš„</span>
<span class="token keyword">var</span> token <span class="token operator">=</span> PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;MY TOPIC&#39;</span><span class="token punctuation">,</span> mySubscriber<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-9-åˆ†å±‚å¯»å€" tabindex="-1"><a class="header-anchor" href="#_4-9-åˆ†å±‚å¯»å€" aria-hidden="true">#</a> 4.9. åˆ†å±‚å¯»å€</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…ï¼Œä»ä¸»é¢˜å±‚æ¬¡ç»“æ„ä¸­æ¥æ”¶æ‰€æœ‰ä¸»é¢˜</span>
<span class="token keyword">var</span> myToplevelSubscriber <span class="token operator">=</span> å‡½æ•°ï¼ˆmsgï¼Œæ•°æ®ï¼‰<span class="token punctuation">{</span>
    console<span class="token punctuation">.</span>logï¼ˆ<span class="token string">&#39;é¡¶å±‚ï¼š&#39;</span>ï¼Œmsgï¼Œæ•°æ®ï¼‰ï¼›
<span class="token punctuation">}</span>

<span class="token comment">//è®¢é˜…â€œæ±½è½¦â€å±‚æ¬¡ç»“æ„ä¸­çš„æ‰€æœ‰ä¸»é¢˜</span>
PubSub<span class="token punctuation">.</span>subscribeï¼ˆâ€œcarâ€ï¼ŒmyToplevelSubscriberï¼‰ï¼›

<span class="token comment">//åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…ï¼Œä»…æ¥æ”¶æ¥è‡ªå±‚æ¬¡ç»“æ„æ“ä½œä¸»é¢˜çš„å¶å­ä¸»é¢˜</span>
<span class="token keyword">var</span> <span class="token function-variable function">mySpecificSubscriber</span> <span class="token operator">=</span> <span class="token keyword">function</span>ï¼ˆmsgï¼Œæ•°æ®ï¼‰<span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;specific: &#39;</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä»…è®¢é˜…â€œcar.driveâ€ä¸»é¢˜</span>
PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;car.drive&#39;</span><span class="token punctuation">,</span> mySpecificSubscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å‘å¸ƒä¸€äº›ä¸»é¢˜</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;car.purchase&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;æˆ‘çš„æ–°è½¦&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;car.drive&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">speed</span><span class="token operator">:</span> <span class="token string">&#39;14&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;car.sell&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">newOwner</span><span class="token operator">:</span> <span class="token string">&#39;å…¶ä»–äºº&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†è°ƒç”¨myToplevelSubscriber for all</span>
<span class="token comment">//ä¸»é¢˜ï¼Œæ€»å…±ä¸‰æ¬¡</span>
<span class="token comment">// ä½†æ˜¯ï¼ŒmySpecificSubscriberåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå› ä¸ºå®ƒåª</span>
<span class="token comment">//è®¢é˜…â€œcar.driveâ€ä¸»é¢˜</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-æç¤º" tabindex="-1"><a class="header-anchor" href="#_5-æç¤º" aria-hidden="true">#</a> 5. æç¤º</h2><p>å¯¹ä¸»é¢˜ä½¿ç”¨â€œå¸¸é‡â€ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æ–‡æœ¬ã€‚PubSubJSä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºä¸»é¢˜ï¼Œå¹¶å°†å¾ˆé«˜å…´å°è¯•å°†æ‚¨çš„ä¸»é¢˜ä¸ä»»ä½•ä¸»é¢˜ä¸€èµ·äº¤ä»˜ã€‚å› æ­¤ï¼Œå½“æ‚¨è¿›è¡Œé”™åˆ«å­—æ—¶ï¼Œè®©JavaScriptå¼•æ“æŠ±æ€¨ï¼Œä»è€Œé¿å…æ²®ä¸§çš„è°ƒè¯•ã€‚</p><h3 id="_5-1-ä½¿ç”¨-å¸¸é‡-çš„ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#_5-1-ä½¿ç”¨-å¸¸é‡-çš„ç¤ºä¾‹" aria-hidden="true">#</a> 5.1. ä½¿ç”¨â€œå¸¸é‡â€çš„ç¤ºä¾‹</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ğŸ‘ åçš„ä½¿ç”¨</span>
PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ğŸ‘ å°±å¾—è¿™ä¹ˆç”¨</span>
<span class="token keyword">var</span> <span class="token constant">MY_TOPIC</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>
PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token constant">MY_TOPIC</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token constant">MY_TOPIC</span><span class="token punctuation">,</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-ä½¿ç”¨es6-7è¯­æ³•çš„-ç¬¦å·å¸¸æ•°-ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#_5-2-ä½¿ç”¨es6-7è¯­æ³•çš„-ç¬¦å·å¸¸æ•°-ç¤ºä¾‹" aria-hidden="true">#</a> 5.2. ä½¿ç”¨ES6/7è¯­æ³•çš„â€œç¬¦å·å¸¸æ•°â€ç¤ºä¾‹</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// event-types.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">MY_TOPIC</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;MY_TOPIC&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// somefile.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">MY_TOPIC</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./event-types.js&#39;</span>
PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token constant">MY_TOPIC</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token constant">MY_TOPIC</span><span class="token punctuation">,</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-å¼€å‘è€…å·¥å…·ä¸­å †æ ˆè·Ÿè¸ªçš„å³æ—¶ä¾‹å¤–" tabindex="-1"><a class="header-anchor" href="#_5-3-å¼€å‘è€…å·¥å…·ä¸­å †æ ˆè·Ÿè¸ªçš„å³æ—¶ä¾‹å¤–" aria-hidden="true">#</a> 5.3. å¼€å‘è€…å·¥å…·ä¸­å †æ ˆè·Ÿè¸ªçš„å³æ—¶ä¾‹å¤–</h3><p>ä»1.3.2ç‰ˆæœ¬å¼€å§‹ï¼Œæ‚¨å¯ä»¥å¼ºåˆ¶ç«‹å³å¼‚å¸¸ï¼ˆè€Œä¸æ˜¯å»¶è¿Ÿå¼‚å¸¸ï¼‰ï¼Œè¿™çš„å¥½å¤„æ˜¯åœ¨å¼€å‘å·¥å…·ä¸­æŸ¥çœ‹æ—¶ä¿æŒå †æ ˆè·Ÿè¸ªã€‚</p><p>è¿™åº”è¯¥è¢«è§†ä¸ºä»…å¼€å‘é€‰é¡¹ï¼Œå› ä¸ºPubSubJSæ—¨åœ¨å°è¯•å°†æ‚¨çš„ä¸»é¢˜äº¤ä»˜ç»™æ‰€æœ‰è®¢é˜…è€…ï¼Œå³ä½¿æœ‰äº›è®¢é˜…è€…å¤±è´¥ã€‚</p><p>åœ¨å¼€å‘ä¸­è®¾ç½®å³æ—¶å¼‚å¸¸å¾ˆå®¹æ˜“ï¼Œåªéœ€åœ¨åŠ è½½åå‘Šè¯‰PubSubJSã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>PubSub<span class="token punctuation">.</span>immediateExceptions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_6-æ›¿ä»£æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_6-æ›¿ä»£æ–¹æ¡ˆ" aria-hidden="true">#</a> 6. æ›¿ä»£æ–¹æ¡ˆ</h2><p>è¿™äº›æ˜¯å‡ ä¸ªæ›¿ä»£é¡¹ç›®ï¼Œä¹Ÿåœ¨JavaScriptä¸­å®ç°åŸºäºä¸»é¢˜çš„å‘å¸ƒè®¢é˜…ã€‚</p>`,34),J=n("li",null,"http://www.joezimjs.com/projects/publish-subscribe-jquery-plugin/",-1),C=n("li",null,"http://amplifyjs.com/api/pubsub/",-1),T={href:"http://radio.uxder.com/",target:"_blank",rel:"noopener noreferrer"},I={href:"https://github.com/pmelander/Subtopic",target:"_blank",rel:"noopener noreferrer"},M=n("h2",{id:"å‚è€ƒæ–‡æ¡£",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å‚è€ƒæ–‡æ¡£","aria-hidden":"true"},"#"),s(" å‚è€ƒæ–‡æ¡£")],-1),O={href:"https://github.com/mroderick/PubSubJS",target:"_blank",rel:"noopener noreferrer"};function Y(q,E){const a=c("ExternalLinkIcon");return i(),o("div",null,[u,n("blockquote",null,[n("p",null,[s("å‰å¾€ "),n("a",r,[s("Github"),e(a)])])]),d,n("p",null,[s("PubSubJSæ˜¯ä¸€ä¸ª"),n("a",k,[s("ç”¨"),e(a)]),s("JavaScriptç¼–å†™çš„"),n("a",b,[s("åŸºäºä¸»é¢˜"),e(a)]),s("çš„"),n("a",v,[s("å‘å¸ƒ/è®¢é˜…"),e(a)]),s("åº“ã€‚")]),m,h,g,n("p",null,[s("PubSubJSæ—¨åœ¨ç”¨äº"),_,s("ï¼Œä¸æ˜¯å¤šè¿›ç¨‹åº”ç”¨ç¨‹åºï¼ˆå¦‚"),n("a",f,[s("Node.js â€“ "),e(a)]),s("å…·æœ‰è®¸å¤šå­è¿›ç¨‹çš„"),n("a",S,[s("é›†ç¾¤"),e(a)]),s("ï¼‰çš„å¥½å€™é€‰ç¨‹åºã€‚å¦‚æœæ‚¨çš„Node.jsåº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªå•ä¸€çš„è¿›ç¨‹åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆæ‚¨å°±å¾ˆå¥½ã€‚å¦‚æœå®ƒæ˜¯ï¼ˆæˆ–å°†è¦ï¼‰ä¸€ä¸ªå¤šè¿›ç¨‹åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯èƒ½æœ€å¥½ä½¿ç”¨"),n("a",P,[s("redis Pub/Sub"),e(a)]),s("æˆ–ç±»ä¼¼")]),j,n("ul",null,[y,n("li",null,[n("p",null,[s("ä»GitHub"),n("a",x,[s("ä¸‹è½½æ ‡è®°ç‰ˆæœ¬"),e(a)])])])]),w,n("ul",null,[J,C,n("li",null,[n("a",T,[s("http://radio.uxder.com/ "),e(a)]),s("â€” é¢å‘â€œæ¸ é“â€ï¼Œæ²¡æœ‰ä¾èµ–æ€§")]),n("li",null,[n("a",I,[s("https://github.com/pmelander/Subtopic "),e(a)]),s("- æ”¯æŒé¦™è‰ã€ä¸‹åˆ’çº¿ã€jQueryï¼Œç”šè‡³å¯ä»¥åœ¨NuGetä¸­æä¾›")])]),M,n("ul",null,[n("li",null,[n("a",O,[s("PubSubJS github readmeæ–‡æ¡£ç›´è¯‘"),e(a)])])])])}const V=p(l,[["render",Y],["__file","index.html.vue"]]);export{V as default};
