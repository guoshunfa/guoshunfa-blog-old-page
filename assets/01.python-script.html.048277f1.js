import{_ as n,o as s,c as a,e as t}from"./app.4659d0e0.js";const p={},e=t(`<h1 id="python-脚本记录" tabindex="-1"><a class="header-anchor" href="#python-脚本记录" aria-hidden="true">#</a> Python - 脚本记录</h1><details class="custom-container details"><summary>批量替换文件夹内的文件内容</summary><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#-*- coding:utf-8 -*-</span>

<span class="token keyword">import</span> os
<span class="token keyword">import</span> re

<span class="token comment">#要改的文件夹</span>
<span class="token builtin">dir</span> <span class="token operator">=</span><span class="token string">&quot;/Library/work/workspace-my/test_file/file&quot;</span>

<span class="token comment">#要改的文件类型（可以输入多个）</span>
file_type<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;.txt&quot;</span><span class="token punctuation">]</span>

<span class="token comment">#替换表（可以用python正则表达式）</span>
look_up_table<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;第一行&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
               <span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">get_filelist</span><span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token punctuation">,</span>filetype<span class="token punctuation">)</span><span class="token punctuation">:</span>
    Filelist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> home<span class="token punctuation">,</span> dirs<span class="token punctuation">,</span> files <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> filename <span class="token keyword">in</span> files<span class="token punctuation">:</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>filename<span class="token punctuation">[</span><span class="token operator">-</span><span class="token builtin">len</span><span class="token punctuation">(</span>filetype<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">==</span>filetype<span class="token punctuation">)</span><span class="token punctuation">:</span>
                Filelist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>home<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> Filelist

<span class="token keyword">if</span> __name__ <span class="token operator">==</span><span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> <span class="token builtin">type</span> <span class="token keyword">in</span> file_type<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;开始处理&quot;</span><span class="token operator">+</span><span class="token builtin">type</span><span class="token operator">+</span><span class="token string">&quot;类型文件&quot;</span><span class="token punctuation">)</span>
        file_list <span class="token operator">=</span> get_filelist<span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;共发现&quot;</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>file_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;个&quot;</span><span class="token operator">+</span><span class="token builtin">type</span><span class="token operator">+</span><span class="token string">&quot;类型文件&quot;</span><span class="token punctuation">)</span>
        replace_count<span class="token operator">=</span><span class="token number">0</span>
        file_count<span class="token operator">=</span><span class="token number">0</span>
        <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span>  file_list<span class="token punctuation">:</span>
            file_count<span class="token operator">=</span>file_count<span class="token operator">+</span><span class="token number">1</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>file_count<span class="token operator">%</span><span class="token number">100</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;修改到第&quot;</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>file_count<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;个文件&quot;</span><span class="token punctuation">)</span>
            file_data<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
                <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span>
                    <span class="token keyword">for</span> item <span class="token keyword">in</span> look_up_table<span class="token punctuation">:</span>
                        <span class="token keyword">if</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">:</span>
                            <span class="token comment">#print(&quot;正在修改从&quot;+item[0]+&quot;到&quot;+item[1])</span>
                            line<span class="token operator">=</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>line<span class="token punctuation">)</span>
                            replace_count<span class="token operator">=</span>replace_count<span class="token operator">+</span><span class="token number">1</span>
                    file_data <span class="token operator">+=</span> line
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>file_data<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;一共进行了&quot;</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>replace_count<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;处替换&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;结束处理&quot;</span><span class="token operator">+</span><span class="token builtin">type</span><span class="token operator">+</span><span class="token string">&quot;类型文件&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;全部结束&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,2),o=[e];function i(c,l){return s(),a("div",null,o)}const k=n(p,[["render",i],["__file","01.python-script.html.vue"]]);export{k as default};
