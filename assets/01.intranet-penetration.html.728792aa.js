import{_ as l,r,o as i,c as o,a as e,b as n,d as s,e as t}from"./app.4659d0e0.js";const c={},p=e("h1",{id:"内网穿透",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#内网穿透","aria-hidden":"true"},"#"),n(" 内网穿透")],-1),d=e("blockquote",null,[e("p",null,"外网 访问内网服务器。")],-1),u=e("h2",{id:"_1-frp-提供软件服务",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-frp-提供软件服务","aria-hidden":"true"},"#"),n(" 1. frp（提供软件服务）")],-1),h=e("p",null,"通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：",-1),v=e("ul",null,[e("li",null,"客户端服务端通信支持 TCP、KCP 以及 Websocket 等多种协议。"),e("li",null,"采用 TCP 连接流式复用，在单个连接间承载更多请求，节省连接建立时间。"),e("li",null,"代理组间的负载均衡。"),e("li",null,"端口复用，多个服务通过同一个服务端端口暴露。"),e("li",null,"多个原生支持的客户端插件（静态文件查看，HTTP、SOCK5 代理等），便于独立使用 frp 客户端完成某些工作。"),e("li",null,"高度扩展性的服务端插件系统，方便结合自身需求进行功能扩展。"),e("li",null,"服务端和客户端 UI 页面。")],-1),k={href:"https://github.com/fatedier/frp/tree/master",target:"_blank",rel:"noopener noreferrer"},m={href:"https://www.bilibili.com/video/BV1J74117714?from=search&seid=15603148927849452138",target:"_blank",rel:"noopener noreferrer"},_={href:"https://gofrp.org/docs/",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"},f={href:"https://gofrp.org/docs/examples/ssh/",target:"_blank",rel:"noopener noreferrer"},g=e("h3",{id:"_1-1-阅读frp中文文档",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-1-阅读frp中文文档","aria-hidden":"true"},"#"),n(" 1.1. 阅读frp中文文档")],-1),y={href:"https://gofrp.org/docs/",target:"_blank",rel:"noopener noreferrer"},x=e("p",null,"frp需要配置两端，客户端和服务端，服务端是具有公网ip的服务器，客户端是内网中的服务器。",-1),q=e("h3",{id:"_1-2-下载",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-2-下载","aria-hidden":"true"},"#"),n(" 1.2. 下载")],-1),w={href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"},N=e("p",null,"根据操作系统选择对应的版本。",-1),P=e("h3",{id:"_1-3-配置-服务端和客户端",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-3-配置-服务端和客户端","aria-hidden":"true"},"#"),n(" 1.3. 配置 服务端和客户端")],-1),I=e("blockquote",null,[e("p",null,"目录介绍：frpc前缀的文件是内网服务需要的；frps前缀的文件是公网IP需要的。")],-1),S={href:"https://gofrp.org/docs/examples/ssh/",target:"_blank",rel:"noopener noreferrer"},T=t(`<h4 id="_1-3-1-公网服务需要配置frps-ini文件" tabindex="-1"><a class="header-anchor" href="#_1-3-1-公网服务需要配置frps-ini文件" aria-hidden="true">#</a> 1.3.1. <strong>公网服务需要配置<code>frps.ini</code>文件</strong></h4><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">common</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">bind_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">7000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>参数描述：</p><ul><li>bind_port：表示frp服务对应端口，后续需要在内网服务器对应frpc.ini文件也对应上。</li></ul><h4 id="_1-3-2-内网服务需要配置frpc-ini文件" tabindex="-1"><a class="header-anchor" href="#_1-3-2-内网服务需要配置frpc-ini文件" aria-hidden="true">#</a> 1.3.2. 内网服务需要配置<code>frpc.ini</code>文件</h4><blockquote><p><strong>按需求进行配置信息</strong>，除基础信息配置common外，其他的根据自己需求进行摘选（每一个标签都是一个独立的模块）。</p></blockquote><p>例子：</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">common</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">server_addr</span> <span class="token punctuation">=</span> <span class="token value attr-value">********</span>
<span class="token key attr-name">server_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">7000</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">ssh</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span>
<span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">22</span>
<span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">6000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基础配置参数描述：</p><ul><li><code>server_addr</code>表示公网服务器的IP/域名。</li><li>server_port表示对应公网frp服务的端口。</li></ul><h5 id="_1-3-2-1-ssh" tabindex="-1"><a class="header-anchor" href="#_1-3-2-1-ssh" aria-hidden="true">#</a> 1.3.2.1. ssh</h5>`,11),B={href:"https://gofrp.org/docs/examples/ssh/",target:"_blank",rel:"noopener noreferrer"},C=t(`<div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">ssh</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span>
<span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">22</span>
<span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">6000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参数描述：</p><ul><li>type表示对应类型。</li><li><code>local_ip</code> 和 <code>local_port</code> 配置为本地需要暴露到公网的服务地址和端口。</li><li><code>remote_port</code> 表示在 frp 服务端监听的端口，访问此端口的流量将会被转发到本地服务对应的端口。</li></ul><h5 id="_1-3-2-2-web" tabindex="-1"><a class="header-anchor" href="#_1-3-2-2-web" aria-hidden="true">#</a> 1.3.2.2. web</h5><blockquote><p>配置web服务</p></blockquote><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">web</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span>
<span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">9002</span>
<span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">9002</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">web2</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">type</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span>
<span class="token key attr-name">local_ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">local_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">9101</span>
<span class="token key attr-name">remote_port</span> <span class="token punctuation">=</span> <span class="token value attr-value">9101</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参数描述：</p><blockquote><p>可支持多个web服务。</p></blockquote><ul><li>type表示对应类型。</li><li><code>local_ip</code> 和 <code>local_port</code> 配置为本地需要暴露到公网的服务地址和端口。</li><li><code>remote_port</code> 表示在 frp 服务端监听的端口，访问此端口的流量将会被转发到本地服务对应的端口。</li></ul><h3 id="_1-4-frp服务启动" tabindex="-1"><a class="header-anchor" href="#_1-4-frp服务启动" aria-hidden="true">#</a> 1.4. frp服务启动</h3><p>先通过 <code>./frps -c ./frps.ini</code> 启动服务端，再通过 <code>./frpc -c ./frpc.ini</code> 启动客户端。如果需要在后台长期运行，建议结合其他工具使用，例如 <code>systemd</code> 和 <code>supervisor</code>。</p><h3 id="_1-5-frp服务设置-后台启动-开机启动" tabindex="-1"><a class="header-anchor" href="#_1-5-frp服务设置-后台启动-开机启动" aria-hidden="true">#</a> 1.5. frp服务设置 后台启动 / 开机启动</h3><blockquote><p>systemctl来控制启动</p></blockquote><p>以服务端为例子：</p><p><code>sudo vim /lib/systemd/system/frps.service</code> 在frps.service里写入以下内容</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[Unit]
Description=fraps service
After=network.target syslog.target
Wants=network.target

[Service]
Type=simple
#启动服务的命令（此处写你的frps的实际安装目录）
ExecStart=/your/path/frps -c /your/path/frps.ini

[Install]
WantedBy=multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就启动frps <code>sudo systemctl start frps</code> 再打开自启动 <code>sudo systemctl enable frps</code></p><ul><li>如果要重启应用，可以这样，sudo systemctl restart frps</li><li>如果要停止应用，可以输入，sudo systemctl stop frps</li><li>如果要查看应用的日志，可以输入，sudo systemctl status frps</li></ul><h2 id="_2-ngrok-提供线上隧道和线上管理平台" tabindex="-1"><a class="header-anchor" href="#_2-ngrok-提供线上隧道和线上管理平台" aria-hidden="true">#</a> 2. Ngrok（提供线上隧道和线上管理平台）</h2><h3 id="_2-1-注册-登陆ngork" tabindex="-1"><a class="header-anchor" href="#_2-1-注册-登陆ngork" aria-hidden="true">#</a> 2.1. 注册/登陆Ngork</h3>`,20),V={href:"http://ngrok.cc/login.html",target:"_blank",rel:"noopener noreferrer"},E=t(`<h3 id="_2-2-购买隧道-有免费的" tabindex="-1"><a class="header-anchor" href="#_2-2-购买隧道-有免费的" aria-hidden="true">#</a> 2.2. 购买隧道（有免费的）</h3><p><img src="https://file.pandacode.cn//blog/202109101831106.png" alt="image-20210718150645562"></p><p><strong>配置相关信息</strong></p><h3 id="_2-3-下载-使用ngork客户端" tabindex="-1"><a class="header-anchor" href="#_2-3-下载-使用ngork客户端" aria-hidden="true">#</a> 2.3. 下载/使用Ngork客户端</h3><blockquote><p>不同系统，使用不同，详情需要查看官方文档。</p></blockquote><p>Mac 版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./sunny clientid 隧道id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7);function W(H,K){const a=r("ExternalLinkIcon");return i(),o("div",null,[p,d,u,e("blockquote",null,[h,v,e("p",null,[e("a",k,[n("frp github"),s(a)]),n(" | "),e("a",m,[n("bilibili 视频教程"),s(a)]),n(" | "),e("a",_,[n("frp中文文档"),s(a)]),n(" | "),e("a",b,[n("frp下载地址"),s(a)]),n(" | "),e("a",f,[n("官方示例"),s(a)])])]),g,e("p",null,[n("移步到官网 -> "),e("a",y,[n("frp中文文档"),s(a)])]),x,q,e("p",null,[e("a",w,[n("frp下载地址"),s(a)])]),N,P,I,e("p",null,[n("可以查看官网"),e("a",S,[n("示例"),s(a)]),n("，这里也简单的做一些介绍。")]),T,e("blockquote",null,[e("p",null,[e("a",B,[n("通过 SSH 访问内网机器"),s(a)])])]),C,e("p",null,[e("a",V,[n("点击进入Ngrok官网"),s(a)])]),E])}const U=l(c,[["render",W],["__file","01.intranet-penetration.html.vue"]]);export{U as default};
