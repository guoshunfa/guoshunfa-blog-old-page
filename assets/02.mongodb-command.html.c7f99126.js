import{_ as c,r as o,o as i,c as d,a as n,b as s,d as a,w as l,e as p}from"./app.4659d0e0.js";const u={},r=p(`<h1 id="mongodb-å‘½ä»¤è®°å½•" tabindex="-1"><a class="header-anchor" href="#mongodb-å‘½ä»¤è®°å½•" aria-hidden="true">#</a> MongoDB - å‘½ä»¤è®°å½•</h1><blockquote><p>ä¸€ä¸‹å†…å®¹åŸºäºMongoDB 4.4.11ç‰ˆæœ¬ã€‚</p><p>å‘½ä»¤è¡Œè¿æ¥æ•°æ®åº“æ–¹å¼ï¼š</p><ol><li>ç›´æ¥è¾“å…¥<code>mongo</code>ã€‚</li><li><code>mongo mongodb://username:password@hostname/dbname</code>ã€‚ä¾‹å­ï¼š<code>mongo mongodb://admin:123456@123.1.2.3:12345/test01</code></li></ol></blockquote><h2 id="_1-mongodb-ä¸»è¦å‘½ä»¤æè¿°" tabindex="-1"><a class="header-anchor" href="#_1-mongodb-ä¸»è¦å‘½ä»¤æè¿°" aria-hidden="true">#</a> 1. MongoDB ä¸»è¦å‘½ä»¤æè¿°</h2><blockquote><p><strong>è¿™é‡Œç›´æ¥é€šè¿‡helpå‘½ä»¤çš„æ”¾å›å†…å®¹è¿›è¡Œè®°å½•ã€‚</strong></p><p>å¤‡æ³¨ï¼šè¿™é‡Œæè¿°çš„è¡¨ã€é›†åˆã€æ–‡æ¡£ï¼Œéƒ½æ˜¯è¡¨è¾¾æ•°æ®åº“è¡¨çš„æ„æ€ã€‚</p></blockquote><h3 id="_1-1-help-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1-1-help-å‘½ä»¤" aria-hidden="true">#</a> 1.1. help å‘½ä»¤</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">help</span>												 å…³äºmongodbä¸»è¦æ–¹æ³•çš„å¸®åŠ©
	db.help<span class="token punctuation">(</span><span class="token punctuation">)</span>                    å…³äºæ•°æ®åº“æ–¹æ³•çš„å¸®åŠ©
	db.mycoll.help<span class="token punctuation">(</span><span class="token punctuation">)</span>             å…³äºæ•°æ®åº“è¡¨æ–¹æ³•çš„å¸®åŠ©
	sh.help<span class="token punctuation">(</span><span class="token punctuation">)</span>                    åˆ†ç‰‡æ–¹æ³•çš„å¸®åŠ©
	rs.help<span class="token punctuation">(</span><span class="token punctuation">)</span>                    å‰¯æœ¬é›†æ–¹æ³•çš„å¸®åŠ©
	<span class="token builtin class-name">help</span> admin                   è¡Œæ”¿å¸®åŠ©
	<span class="token builtin class-name">help</span> connect                 è¿æ¥åˆ°æ•°æ®åº“çš„å¸®åŠ©
	<span class="token builtin class-name">help</span> keys                    é”®çš„å¿«æ·æ–¹å¼
	<span class="token builtin class-name">help</span> misc                    misc things to know
	<span class="token builtin class-name">help</span> mr                      mapreduceï¼ˆä¸€ç§åˆ†å¸ƒå¼å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ï¼‰

	show dbs                     å±•ç¤ºæ‰€æœ‰æ•°æ®åº“çš„åç§°
	show collections             å±•ç¤ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰é›†åˆï¼ˆè¡¨ï¼‰åç§°
	show <span class="token function">users</span>                   å±•ç¤ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰ç”¨æˆ·
	show profile                 æ˜¾ç¤ºæ—¶é—´ä¸º<span class="token operator">&gt;=</span> 1msçš„æœ€è¿‘çš„system.profileæ¡ç›®
	show logs                    æ˜¾ç¤ºå¯è®¿é—®çš„logåç§°
	show log <span class="token punctuation">[</span>name<span class="token punctuation">]</span>              æ‰“å°å‡ºå†…å­˜ä¸­æ—¥å¿—çš„æœ€åä¸€æ®µï¼Œglobalæ˜¯é»˜è®¤å€¼
	use <span class="token operator">&lt;</span>db_name<span class="token operator">&gt;</span>                è®¾ç½®å½“å‰æ•°æ®åº“
	db.mycoll.find<span class="token punctuation">(</span><span class="token punctuation">)</span>             æŸ¥è¯¢é›†åˆmycollä¸­æ‰€æœ‰çš„è®°å½•
	db.mycoll.find<span class="token punctuation">(</span> <span class="token punctuation">{</span> a <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>  æŸ¥è¯¢é›†åˆmycollä¸­çš„è®°å½•ï¼ŒåªæŸ¥è¯¢æ»¡è¶³æ¡ä»¶a<span class="token operator">=</span><span class="token number">1</span>çš„è®°å½•
	it                           æœ€åä¸€è¡Œæ±‚å€¼çš„ç»“æœ<span class="token punctuation">;</span>ç”¨äºè¿›ä¸€æ­¥è¿­ä»£ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰
	DBQuery.shellBatchSize <span class="token operator">=</span> x   è®¾ç½®shellä¸Šæ˜¾ç¤ºçš„é¡¹ç›®çš„é»˜è®¤æ•°é‡ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰
	<span class="token builtin class-name">exit</span>                         é€€å‡ºmongo shell
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-db-help-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1-2-db-help-å‘½ä»¤" aria-hidden="true">#</a> 1.2. db.help() å‘½ä»¤</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.help<span class="token punctuation">(</span><span class="token punctuation">)</span>
DB methods:
	db.adminCommand<span class="token punctuation">(</span>nameOrDocument<span class="token punctuation">)</span> - åˆ‡æ¢åˆ°<span class="token string">&#39;admin&#39;</span> dbï¼Œå¹¶è¿è¡Œå‘½ä»¤ <span class="token punctuation">[</span>åªè°ƒç”¨ db.runCommand<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span><span class="token punctuation">]</span>ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰
	db.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>pipeline<span class="token punctuation">]</span>, <span class="token punctuation">{</span>options<span class="token punctuation">}</span><span class="token punctuation">)</span> - å¯¹è¯¥æ•°æ®åº“æ‰§è¡Œæ— é›†åˆèšåˆ<span class="token punctuation">;</span>è¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰
	db.auth<span class="token punctuation">(</span>username, password<span class="token punctuation">)</span>ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰
	db.cloneDatabase<span class="token punctuation">(</span>fromhost<span class="token punctuation">)</span> - will only <span class="token keyword">function</span> with MongoDB <span class="token number">4.0</span> and below
	db.commandHelp<span class="token punctuation">(</span>name<span class="token punctuation">)</span> returns the <span class="token builtin class-name">help</span> <span class="token keyword">for</span> the <span class="token builtin class-name">command</span>
	db.copyDatabase<span class="token punctuation">(</span>fromdb, todb, fromhost<span class="token punctuation">)</span> - will only <span class="token keyword">function</span> with MongoDB <span class="token number">4.0</span> and below
	db.createCollection<span class="token punctuation">(</span>name, <span class="token punctuation">{</span>size: <span class="token punctuation">..</span>., capped: <span class="token punctuation">..</span>., max: <span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span>
	db.createUser<span class="token punctuation">(</span>userDocument<span class="token punctuation">)</span>
	db.createView<span class="token punctuation">(</span>name, viewOn, <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token variable">$operator</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>, <span class="token punctuation">{</span>viewOptions<span class="token punctuation">}</span><span class="token punctuation">)</span>
	db.currentOp<span class="token punctuation">(</span><span class="token punctuation">)</span> displays currently executing operations <span class="token keyword">in</span> the db
	db.dropDatabase<span class="token punctuation">(</span>writeConcern<span class="token punctuation">)</span>
	db.dropUser<span class="token punctuation">(</span>username<span class="token punctuation">)</span>
	db.eval<span class="token punctuation">(</span><span class="token punctuation">)</span> - deprecated
	db.fsyncLock<span class="token punctuation">(</span><span class="token punctuation">)</span> flush data to disk and lock server <span class="token keyword">for</span> backups
	db.fsyncUnlock<span class="token punctuation">(</span><span class="token punctuation">)</span> unlocks server following a db.fsyncLock<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.getCollection<span class="token punctuation">(</span>cname<span class="token punctuation">)</span> same as db<span class="token punctuation">[</span><span class="token string">&#39;cname&#39;</span><span class="token punctuation">]</span> or db.cname
	db.getCollectionInfos<span class="token punctuation">(</span><span class="token punctuation">[</span>filter<span class="token punctuation">]</span><span class="token punctuation">)</span> - returns a list that contains the names and options of the db<span class="token string">&#39;s collections
	db.getCollectionNames()
	db.getLastError() - just returns the err msg string
	db.getLastErrorObj() - return full status object
	db.getLogComponents()
	db.getMongo() get the server connection object
	db.getMongo().setSlaveOk() allow queries on a replication slave server
	db.getName()
	db.getProfilingLevel() - deprecated
	db.getProfilingStatus() - returns if profiling is on and slow threshold
	db.getReplicationInfo()
	db.getSiblingDB(name) get the db at the same server as this one
	db.getWriteConcern() - returns the write concern used for any operations on this db, inherited from server object if set
	db.hostInfo() get details about the server&#39;</span>s <span class="token function">host</span>
	db.isMaster<span class="token punctuation">(</span><span class="token punctuation">)</span> check replica primary status
	db.killOp<span class="token punctuation">(</span>opid<span class="token punctuation">)</span> kills the current operation <span class="token keyword">in</span> the db
	db.listCommands<span class="token punctuation">(</span><span class="token punctuation">)</span> lists all the db commands
	db.loadServerScripts<span class="token punctuation">(</span><span class="token punctuation">)</span> loads all the scripts <span class="token keyword">in</span> db.system.js
	db.logout<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.printCollectionStats<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.printReplicationInfo<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.printShardingStatus<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.printSlaveReplicationInfo<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.resetError<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.runCommand<span class="token punctuation">(</span>cmdObj<span class="token punctuation">)</span> run a database command.  <span class="token keyword">if</span> cmdObj is a string, turns it into <span class="token punctuation">{</span>cmdObj: <span class="token number">1</span><span class="token punctuation">}</span>
	db.serverStatus<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.setLogLevel<span class="token punctuation">(</span>level,<span class="token operator">&lt;</span>component<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	db.setProfilingLevel<span class="token punctuation">(</span>level,slowms<span class="token punctuation">)</span> <span class="token assign-left variable">0</span><span class="token operator">=</span>off <span class="token assign-left variable">1</span><span class="token operator">=</span>slow <span class="token assign-left variable">2</span><span class="token operator">=</span>all
	db.setVerboseShell<span class="token punctuation">(</span>flag<span class="token punctuation">)</span> display extra information <span class="token keyword">in</span> shell output
	db.setWriteConcern<span class="token punctuation">(</span><span class="token operator">&lt;</span>write concern doc<span class="token operator">&gt;</span><span class="token punctuation">)</span> - sets the <span class="token function">write</span> concern <span class="token keyword">for</span> writes to the db
	db.shutdownServer<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.stats<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.unsetWriteConcern<span class="token punctuation">(</span><span class="token operator">&lt;</span>write concern doc<span class="token operator">&gt;</span><span class="token punctuation">)</span> - unsets the <span class="token function">write</span> concern <span class="token keyword">for</span> writes to the db
	db.version<span class="token punctuation">(</span><span class="token punctuation">)</span> current version of the server
	db.watch<span class="token punctuation">(</span><span class="token punctuation">)</span> - opens a change stream cursor <span class="token keyword">for</span> a database to report on all  changes to its non-system collections.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-db-collection-help-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1-3-db-collection-help-å‘½ä»¤" aria-hidden="true">#</a> 1.3. db.collection.help() å‘½ä»¤</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.demo.help<span class="token punctuation">(</span><span class="token punctuation">)</span>
DBCollection <span class="token builtin class-name">help</span>
	db.demo.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.help<span class="token punctuation">(</span><span class="token punctuation">)</span> - å±•ç¤º DBCursor æ–¹æ³•å¸®åŠ©
	db.demo.bulkWrite<span class="token punctuation">(</span> operations, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - bulk execute <span class="token function">write</span> operations, optional parameters are: w, wtimeout, j
	db.demo.count<span class="token punctuation">(</span> query <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - è®¡ç®—åŒ¹é…æŸ¥è¯¢çš„æ–‡æ¡£æ•°é‡ï¼Œå¯é€‰å‚æ•°æœ‰:limitã€skipã€hintã€maxTimeMS
	db.demo.countDocuments<span class="token punctuation">(</span> query <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - count the number of documents that matches the query, optional parameters are: limit, skip, hint, maxTimeMS
	db.demo.estimatedDocumentCount<span class="token punctuation">(</span> <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - estimate the document count using collection metadata, optional parameters are: maxTimeMS
	db.demo.convertToCapped<span class="token punctuation">(</span>maxBytes<span class="token punctuation">)</span> - calls <span class="token punctuation">{</span>convertToCapped:<span class="token string">&#39;demo&#39;</span>, size:maxBytes<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token builtin class-name">command</span>
	db.demo.createIndex<span class="token punctuation">(</span>keypattern<span class="token punctuation">[</span>,options<span class="token punctuation">]</span><span class="token punctuation">)</span>
	db.demo.createIndexes<span class="token punctuation">(</span><span class="token punctuation">[</span>keypatterns<span class="token punctuation">]</span>, <span class="token operator">&lt;</span>options<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	db.demo.dataSize<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.demo.deleteOne<span class="token punctuation">(</span> filter, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - delete first matching document, optional parameters are: w, wtimeout, j
	db.demo.deleteMany<span class="token punctuation">(</span> filter, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - delete all matching documents, optional parameters are: w, wtimeout, j
	db.demo.distinct<span class="token punctuation">(</span> key, query, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - e.g. db.demo.distinct<span class="token punctuation">(</span> <span class="token string">&#39;x&#39;</span> <span class="token punctuation">)</span>, optional parameters are: maxTimeMS
	db.demo.drop<span class="token punctuation">(</span><span class="token punctuation">)</span> drop the collection
	db.demo.dropIndex<span class="token punctuation">(</span>index<span class="token punctuation">)</span> - e.g. db.demo.dropIndex<span class="token punctuation">(</span> <span class="token string">&quot;indexName&quot;</span> <span class="token punctuation">)</span> or db.demo.dropIndex<span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token string">&quot;indexKey&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
	db.demo.hideIndex<span class="token punctuation">(</span>index<span class="token punctuation">)</span> - e.g. db.demo.hideIndex<span class="token punctuation">(</span> <span class="token string">&quot;indexName&quot;</span> <span class="token punctuation">)</span> or db.demo.hideIndex<span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token string">&quot;indexKey&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
	db.demo.unhideIndex<span class="token punctuation">(</span>index<span class="token punctuation">)</span> - e.g. db.demo.unhideIndex<span class="token punctuation">(</span> <span class="token string">&quot;indexName&quot;</span> <span class="token punctuation">)</span> or db.demo.unhideIndex<span class="token punctuation">(</span> <span class="token punctuation">{</span> <span class="token string">&quot;indexKey&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
	db.demo.dropIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.demo.ensureIndex<span class="token punctuation">(</span>keypattern<span class="token punctuation">[</span>,options<span class="token punctuation">]</span><span class="token punctuation">)</span> - DEPRECATED, use createIndex<span class="token punctuation">(</span><span class="token punctuation">)</span> instead
	db.demo.explain<span class="token punctuation">(</span><span class="token punctuation">)</span>.help<span class="token punctuation">(</span><span class="token punctuation">)</span> - show explain <span class="token builtin class-name">help</span>
	db.demo.reIndex<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.demo.find<span class="token punctuation">(</span><span class="token punctuation">[</span>query<span class="token punctuation">]</span>,<span class="token punctuation">[</span>fields<span class="token punctuation">]</span><span class="token punctuation">)</span> - query is an optional query filter. fields is optional <span class="token builtin class-name">set</span> of fields to return.
	                                              e.g. db.demo.find<span class="token punctuation">(</span> <span class="token punctuation">{</span>x:77<span class="token punctuation">}</span> , <span class="token punctuation">{</span>name:1, x:1<span class="token punctuation">}</span> <span class="token punctuation">)</span>
	db.demo.find<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>.count<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.demo.find<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>.limit<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	db.demo.find<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>.skip<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	db.demo.find<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>
	db.demo.findOne<span class="token punctuation">(</span><span class="token punctuation">[</span>query<span class="token punctuation">]</span>, <span class="token punctuation">[</span>fields<span class="token punctuation">]</span>, <span class="token punctuation">[</span>options<span class="token punctuation">]</span>, <span class="token punctuation">[</span>readConcern<span class="token punctuation">]</span><span class="token punctuation">)</span>
	db.demo.findOneAndDelete<span class="token punctuation">(</span> filter, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - delete first matching document, optional parameters are: projection, sort, maxTimeMS
	db.demo.findOneAndReplace<span class="token punctuation">(</span> filter, replacement, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - replace first matching document, optional parameters are: projection, sort, maxTimeMS, upsert, returnNewDocument
	db.demo.findOneAndUpdate<span class="token punctuation">(</span> filter, <span class="token operator">&lt;</span>update object or pipeline<span class="token operator">&gt;</span>, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - update first matching document, optional parameters are: projection, sort, maxTimeMS, upsert, returnNewDocument
	db.demo.getDB<span class="token punctuation">(</span><span class="token punctuation">)</span> get DB object associated with collection
	db.demo.getPlanCache<span class="token punctuation">(</span><span class="token punctuation">)</span> get query plan cache associated with collection
	db.demo.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
	db.demo.insert<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
	db.demo.insertOne<span class="token punctuation">(</span> obj, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - insert a document, optional parameters are: w, wtimeout, j
	db.demo.insertMany<span class="token punctuation">(</span> <span class="token punctuation">[</span>objects<span class="token punctuation">]</span>, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - insert multiple documents, optional parameters are: w, wtimeout, j
	db.demo.mapReduce<span class="token punctuation">(</span> mapFunction , reduceFunction , <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span>
	db.demo.aggregate<span class="token punctuation">(</span> <span class="token punctuation">[</span>pipeline<span class="token punctuation">]</span>, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - performs an aggregation on a collection<span class="token punctuation">;</span> returns a cursor
	db.demo.remove<span class="token punctuation">(</span>query<span class="token punctuation">)</span>
	db.demo.replaceOne<span class="token punctuation">(</span> filter, replacement, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - replace the first matching document, optional parameters are: upsert, w, wtimeout, j
	db.demo.renameCollection<span class="token punctuation">(</span> newName , <span class="token operator">&lt;</span>dropTarget<span class="token operator">&gt;</span> <span class="token punctuation">)</span> renames the collection.
	db.demo.runCommand<span class="token punctuation">(</span> name , <span class="token operator">&lt;</span>options<span class="token operator">&gt;</span> <span class="token punctuation">)</span> runs a db <span class="token builtin class-name">command</span> with the given name where the first param is the collection name
	db.demo.save<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
	db.demo.stats<span class="token punctuation">(</span><span class="token punctuation">{</span>scale: N, indexDetails: true/false, indexDetailsKey: <span class="token operator">&lt;</span>index key<span class="token operator">&gt;</span>, indexDetailsName: <span class="token operator">&lt;</span>index name<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	db.demo.storageSize<span class="token punctuation">(</span><span class="token punctuation">)</span> - includes <span class="token function">free</span> space allocated to this collection
	db.demo.totalIndexSize<span class="token punctuation">(</span><span class="token punctuation">)</span> - size <span class="token keyword">in</span> bytes of all the indexes
	db.demo.totalSize<span class="token punctuation">(</span><span class="token punctuation">)</span> - storage allocated <span class="token keyword">for</span> all data and indexes
	db.demo.update<span class="token punctuation">(</span> query, <span class="token operator">&lt;</span>update object or pipeline<span class="token operator">&gt;</span><span class="token punctuation">[</span>, upsert_bool, multi_bool<span class="token punctuation">]</span> <span class="token punctuation">)</span> - instead of two flags, you can pass an object with fields: upsert, multi, hint
	db.demo.updateOne<span class="token punctuation">(</span> filter, <span class="token operator">&lt;</span>update object or pipeline<span class="token operator">&gt;</span>, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - update the first matching document, optional parameters are: upsert, w, wtimeout, j, hint
	db.demo.updateMany<span class="token punctuation">(</span> filter, <span class="token operator">&lt;</span>update object or pipeline<span class="token operator">&gt;</span>, <span class="token operator">&lt;</span>optional params<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - update all matching documents, optional parameters are: upsert, w, wtimeout, j, hint
	db.demo.validate<span class="token punctuation">(</span> <span class="token operator">&lt;</span>full<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - SLOW
	db.demo.getShardVersion<span class="token punctuation">(</span><span class="token punctuation">)</span> - only <span class="token keyword">for</span> use with sharding
	db.demo.getShardDistribution<span class="token punctuation">(</span><span class="token punctuation">)</span> - prints statistics about data distribution <span class="token keyword">in</span> the cluster
	db.demo.getSplitKeysForChunks<span class="token punctuation">(</span> <span class="token operator">&lt;</span>maxChunkSize<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - calculates <span class="token function">split</span> points over all chunks and returns splitter <span class="token keyword">function</span>
	db.demo.getWriteConcern<span class="token punctuation">(</span><span class="token punctuation">)</span> - returns the <span class="token function">write</span> concern used <span class="token keyword">for</span> any operations on this collection, inherited from server/db <span class="token keyword">if</span> <span class="token builtin class-name">set</span>
	db.demo.setWriteConcern<span class="token punctuation">(</span> <span class="token operator">&lt;</span>write concern doc<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - sets the <span class="token function">write</span> concern <span class="token keyword">for</span> writes to the collection
	db.demo.unsetWriteConcern<span class="token punctuation">(</span> <span class="token operator">&lt;</span>write concern doc<span class="token operator">&gt;</span> <span class="token punctuation">)</span> - unsets the <span class="token function">write</span> concern <span class="token keyword">for</span> writes to the collection
	db.demo.latencyStats<span class="token punctuation">(</span><span class="token punctuation">)</span> - display operation latency histograms <span class="token keyword">for</span> this collection
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-help-keys-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1-4-help-keys-å‘½ä»¤" aria-hidden="true">#</a> 1.4. help keys å‘½ä»¤</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">help</span> keys
Tab completion and <span class="token builtin class-name">command</span> <span class="token function">history</span> is available at the <span class="token builtin class-name">command</span> prompt.
Some emacs keystrokes are available too:
  Ctrl-A start of line
  Ctrl-E end of line
  Ctrl-K del to end of line

Multi-line commands
You can enter a multi line javascript expression.  If parens, braces, etc. are not closed, you will see a new line 
beginning with <span class="token string">&#39;...&#39;</span> characters.  Type the rest of your expression.  Press Ctrl-C to abort the data entry <span class="token keyword">if</span> you
get stuck.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¿»è¯‘ä¸ºä¸­æ–‡ï¼š</p><p>åœ¨å‘½ä»¤æç¤ºç¬¦å¤„å¯ä»¥ä½¿ç”¨åˆ¶è¡¨ç¬¦è¡¥å…¨å’Œå‘½ä»¤å†å²è®°å½•ã€‚ ä¸€äº›emacsæŒ‰é”®ä¹Ÿå¯ç”¨:</p><ul><li>Ctrl-A å»åˆ°è¡Œå¼€å§‹</li><li>Ctrl-E å»åˆ°è¡Œç»“æŸ</li><li>Ctrl-K åˆ é™¤æ•´è¡Œ</li></ul><p>å¤šè¡Œå‘½ä»¤ æ‚¨å¯ä»¥è¾“å…¥å¤šè¡Œjavascriptè¡¨è¾¾å¼ã€‚å¦‚æœæ‹¬å·ã€å¤§æ‹¬å·ç­‰æ²¡æœ‰å…³é—­ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°è¡Œå¼€å§‹çš„â€¦â€¦çš„å­—ç¬¦ã€‚è¾“å…¥è¡¨è¾¾å¼çš„å…¶ä½™éƒ¨åˆ†ã€‚æŒ‰Ctrl-Cä¸­æ­¢æ•°æ®è¾“å…¥ï¼Œå¦‚æœæ‚¨è¢«å¡ä½äº†ã€‚</p><h3 id="_1-5-db-collection-find-help-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1-5-db-collection-find-help-å‘½ä»¤" aria-hidden="true">#</a> 1.5. db.collection.find().help() å‘½ä»¤</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.HouseHold.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.help<span class="token punctuation">(</span><span class="token punctuation">)</span>
find<span class="token punctuation">(</span><span class="token operator">&lt;</span>predicate<span class="token operator">&gt;</span>, <span class="token operator">&lt;</span>projection<span class="token operator">&gt;</span><span class="token punctuation">)</span> modifiers
	.sort<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span>
	.limit<span class="token punctuation">(</span><span class="token operator">&lt;</span>n<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.skip<span class="token punctuation">(</span><span class="token operator">&lt;</span>n<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.batchSize<span class="token punctuation">(</span><span class="token operator">&lt;</span>n<span class="token operator">&gt;</span><span class="token punctuation">)</span> - sets the number of docs to <span class="token builtin class-name">return</span> per getMore
	.collation<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span>
	.hint<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span>
	.readConcern<span class="token punctuation">(</span><span class="token operator">&lt;</span>level<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.readPref<span class="token punctuation">(</span><span class="token operator">&lt;</span>mode<span class="token operator">&gt;</span>, <span class="token operator">&lt;</span>tagset<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.count<span class="token punctuation">(</span><span class="token operator">&lt;</span>applySkipLimit<span class="token operator">&gt;</span><span class="token punctuation">)</span> - total <span class="token comment"># of objects matching query. by default ignores skip,limit</span>
	.size<span class="token punctuation">(</span><span class="token punctuation">)</span> - total <span class="token comment"># of objects cursor would return, honors skip,limit</span>
	.explain<span class="token punctuation">(</span><span class="token operator">&lt;</span>verbosity<span class="token operator">&gt;</span><span class="token punctuation">)</span> - accepted verbosities are <span class="token punctuation">{</span><span class="token string">&#39;queryPlanner&#39;</span>, <span class="token string">&#39;executionStats&#39;</span>, <span class="token string">&#39;allPlansExecution&#39;</span><span class="token punctuation">}</span>
	.min<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span>
	.max<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">..</span>.<span class="token punctuation">}</span><span class="token punctuation">)</span>
	.maxTimeMS<span class="token punctuation">(</span><span class="token operator">&lt;</span>n<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.comment<span class="token punctuation">(</span><span class="token operator">&lt;</span>comment<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.tailable<span class="token punctuation">(</span><span class="token operator">&lt;</span>isAwaitData<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.noCursorTimeout<span class="token punctuation">(</span><span class="token punctuation">)</span>
	.allowPartialResults<span class="token punctuation">(</span><span class="token punctuation">)</span>
	.returnKey<span class="token punctuation">(</span><span class="token punctuation">)</span>
	.showRecordId<span class="token punctuation">(</span><span class="token punctuation">)</span> - adds a <span class="token variable">$recordId</span> field to each returned object
	.allowDiskUse<span class="token punctuation">(</span><span class="token punctuation">)</span> - allow using disk <span class="token keyword">in</span> completing the query

Cursor methods
	.toArray<span class="token punctuation">(</span><span class="token punctuation">)</span> - iterates through docs and returns an array of the results
	.forEach<span class="token punctuation">(</span><span class="token operator">&lt;</span>func<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.map<span class="token punctuation">(</span><span class="token operator">&lt;</span>func<span class="token operator">&gt;</span><span class="token punctuation">)</span>
	.hasNext<span class="token punctuation">(</span><span class="token punctuation">)</span>
	.next<span class="token punctuation">(</span><span class="token punctuation">)</span>
	.close<span class="token punctuation">(</span><span class="token punctuation">)</span>
	.objsLeftInBatch<span class="token punctuation">(</span><span class="token punctuation">)</span> - returns count of docs left <span class="token keyword">in</span> current batch <span class="token punctuation">(</span>when exhausted, a new getMore will be issued<span class="token punctuation">)</span>
	.itcount<span class="token punctuation">(</span><span class="token punctuation">)</span> - iterates through documents and counts them
	.pretty<span class="token punctuation">(</span><span class="token punctuation">)</span> - pretty print each document, possibly over multiple lines
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mongodbç”¨æˆ·æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#mongodbç”¨æˆ·æ“ä½œ" aria-hidden="true">#</a> MongoDBç”¨æˆ·æ“ä½œ</h2><blockquote><p>è½¬è½½è‡ªï¼šhttps://blog.csdn.net/hbtj_1216/article/details/120875957</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> admin

db<span class="token punctuation">.</span>createUser<span class="token punctuation">(</span>{
  <span class="token keyword">user</span>: <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>    <span class="token comment">// ç”¨æˆ·åï¼ˆè‡ªå®šä¹‰ï¼‰</span>
  pwd: <span class="token string">&#39;Abc123++&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// å¯†ç ï¼ˆè‡ªå®šä¹‰ï¼‰</span>
  roles:<span class="token punctuation">[</span>{
    role: <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>   <span class="token comment">// ä½¿ç”¨è¶…çº§ç”¨æˆ·è§’è‰²</span>
    db: <span class="token string">&#39;admin&#39;</span>     <span class="token comment">// æŒ‡å®šæ•°æ®åº“</span>
  }<span class="token punctuation">]</span>
}<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½®å®Œæˆï¼Œå¯ä»¥é€šè¿‡æŒ‡ä»¤ <code>show users</code> æŸ¥çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># æŸ¥çœ‹å½“å‰åº“ä¸‹çš„ç”¨æˆ·</span>
<span class="token keyword">show</span> users
<span class="token comment"># åˆ é™¤ç”¨æˆ·</span>
db<span class="token punctuation">.</span>dropUser<span class="token punctuation">(</span><span class="token string">&#39;testadmin&#39;</span><span class="token punctuation">)</span>
<span class="token comment"># ä¿®æ”¹ç”¨æˆ·å¯†ç </span>
db<span class="token punctuation">.</span>updateUser<span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> {pwd: <span class="token string">&#39;654321&#39;</span>}<span class="token punctuation">)</span>
<span class="token comment"># å¯†ç è®¤è¯</span>
db<span class="token punctuation">.</span>auth<span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;654321&#39;</span><span class="token punctuation">)</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th><strong>è§’è‰²æè¿°</strong></th><th>è§’è‰²æ ‡è¯†</th></tr></thead><tbody><tr><td>æ•°æ®åº“ç”¨æˆ·è§’è‰²</td><td>readã€readWrite</td></tr><tr><td>æ•°æ®åº“ç®¡ç†è§’è‰²</td><td>dbAdminã€dbOwnerã€userAdmin</td></tr><tr><td>é›†ç¾¤ç®¡ç†è§’è‰²</td><td>clusterAdminã€clusterManagerã€clusterMonitorã€hostManager</td></tr><tr><td>å¤‡ä»½æ¢å¤è§’è‰²</td><td>backupã€restore</td></tr><tr><td>æ‰€æœ‰æ•°æ®åº“è§’è‰²</td><td>readAnyDatabaseã€readWriteAnyDatabaseã€userAdminAnyDatabaseã€ dbAdminAnyDatabase</td></tr><tr><td>è¶…çº§ç”¨æˆ·è§’è‰²</td><td>root</td></tr></tbody></table><h2 id="æŸ¥è¯¢-find" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢-find" aria-hidden="true">#</a> æŸ¥è¯¢ find()</h2><h3 id="æŸ¥è¯¢å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢å‡½æ•°" aria-hidden="true">#</a> æŸ¥è¯¢å‡½æ•°</h3><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th><th>ğŸŒ°</th></tr></thead><tbody><tr><td><code>find()</code></td><td>æŸ¥è¯¢æ–¹æ³•ï¼Œå¯åœ¨æ–¹æ³•å†…è§„å®šæŸ¥è¯¢è§„åˆ™ã€‚<br></td><td>å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼æŸ¥è¯¢ã€‚<br> <code>db.è¡¨å.find(); </code><br> <code>db.getCollection(&#39;è¡¨å&#39;).find()</code></td></tr><tr><td><code>find({},{})</code></td><td>å‚æ•°ä¸€ï¼šæŸ¥è¯¢æ¡ä»¶ã€‚<br>å‚æ•°äºŒï¼šè§„å®šè¿”å›å“ªäº›å‚æ•°ï¼Œç±»ä¼¼äºselect age from è¡¨åé‡ä¸­çš„ageã€‚<br> <code> {&#39;age&#39;: 1,&#39;name&#39;: 0}</code>å€¼ä¸º1è¿”å›å­—æ®µï¼Œå€¼ä¸º0ä¸è¿”å›å­—æ®µã€‚é»˜è®¤ä¸º0ã€‚</td><td><code>db.col.find({&#39;name&#39;:&#39;å°æ˜&#39;},{&#39;name&#39;:1,&#39;_id&#39;:0})</code></td></tr><tr><td><code>pretty()</code></td><td>ä½¿å¾—æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®åœ¨å‘½ä»¤è¡Œä¸­æ›´åŠ ç¾è§‚çš„æ˜¾ç¤ºï¼Œä¸è‡³äºå¤ªç´§å‡‘ã€‚</td><td><code>db.col.find().pretty()</code></td></tr><tr><td><code>limit()</code></td><td>å‚æ•°ï¼šæ•°å­—ã€‚æƒ³è¦è¯»å–çš„æ•°æ®æ¡æ•°ã€‚ä¸å¡«å†™é»˜è®¤è¿”å›å…¨éƒ¨æ•°æ®ã€‚</td><td><code>db.col.find().limit(1)</code></td></tr><tr><td><code>skip()</code></td><td>å‚æ•°ï¼šæ•°å­—ã€‚è·³è¿‡å¤šå°‘æ•°æ®å¼€å§‹æŸ¥è¯¢ã€‚é»˜è®¤å€¼ä¸º0ã€‚</td><td><code>db.col.find().skip(1)</code></td></tr></tbody></table><h3 id="æŸ¥è¯¢æ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢æ“ä½œç¬¦" aria-hidden="true">#</a> æŸ¥è¯¢æ“ä½œç¬¦</h3><blockquote><p>å¯ä»¥å•å­—æ®µå¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢ã€‚å¦‚ï¼š<code>db.col.find({age : {$lt :18, $gt : 38, $ne : 20}})</code></p></blockquote><table><thead><tr><th style="text-align:left;">è¡¨è¾¾å¼</th><th style="text-align:left;">æè¿°</th><th style="text-align:left;">å®ä¾‹</th><th style="text-align:left;">RDBMSä¸­çš„ç±»ä¼¼è¯­å¥</th></tr></thead><tbody><tr><td style="text-align:left;">ğŸ˜Š</td><td style="text-align:left;"><code>{&lt;key&gt;:&lt;value&gt;</code>}<br>ç­‰äº</td><td style="text-align:left;"><code>db.col.find({&quot;name&quot;:&quot;å°æ˜&quot;})</code></td><td style="text-align:left;"><code>where name = &#39;å°æ˜&#39;</code></td></tr><tr><td style="text-align:left;"><code>$lt</code></td><td style="text-align:left;"><code>{&lt;key&gt;:{$lt:&lt;value&gt;}}</code><br>å°äº</td><td style="text-align:left;"><code>db.col.find({&quot;likes&quot;:{$lt:50}})</code></td><td style="text-align:left;"><code>where likes &lt; 50</code></td></tr><tr><td style="text-align:left;"><code>$lte</code></td><td style="text-align:left;"><code>{&lt;key&gt;:{$lte:&lt;value&gt;}}</code><br>å°äºç­‰äº</td><td style="text-align:left;"><code>db.col.find({&quot;likes&quot;:{$lte:50}})</code></td><td style="text-align:left;"><code>where likes &lt;= 50</code></td></tr><tr><td style="text-align:left;"><code>$gt</code></td><td style="text-align:left;"><code>{&lt;key&gt;:{$gt:&lt;value&gt;}}</code><br>å¤§äº</td><td style="text-align:left;"><code>db.col.find({&quot;likes&quot;:{$gt:50}})</code></td><td style="text-align:left;"><code>where likes &gt; 50</code></td></tr><tr><td style="text-align:left;"><code>$gte</code></td><td style="text-align:left;"><code>{&lt;key&gt;:{$gte:&lt;value&gt;}}</code><br>å¤§äºç­‰äº</td><td style="text-align:left;"><code>db.col.find({&quot;likes&quot;:{$gte:50}})</code></td><td style="text-align:left;"><code>where likes &gt;= 50</code></td></tr><tr><td style="text-align:left;"><code>$in</code></td><td style="text-align:left;"><code>{ &lt;key&gt;: { $in: [&lt;value1&gt;, &lt;value2&gt;, ... &lt;valueN&gt; ] } }</code><br> åŒ…å«</td><td style="text-align:left;"><code>db.col.find( { item : { $in: false } } )</code></td><td style="text-align:left;"><code>where likes in () </code></td></tr><tr><td style="text-align:left;"><code>$nin</code></td><td style="text-align:left;"><code>{ &lt;key&gt;: { $nin: [ &lt;value1&gt;, &lt;value2&gt; ... &lt;valueN&gt; ]} }</code><br> ä¸åŒ…å«</td><td style="text-align:left;"><code>db.col.find( { item : { $nin: false } } )</code></td><td style="text-align:left;"><code>where likes not in () </code></td></tr><tr><td style="text-align:left;"><code>$ne</code></td><td style="text-align:left;"><code>{&lt;key&gt;:{$ne:&lt;value&gt;}}</code><br> ä¸ç­‰äº</td><td style="text-align:left;"><code>db.col.find({&quot;likes&quot;:{$ne:50}})</code></td><td style="text-align:left;"><code>where likes != 50</code></td></tr><tr><td style="text-align:left;"><code>$or</code></td><td style="text-align:left;"><code>{$or:{&lt;key:&lt;value&gt;,&lt;key&gt;:&lt;value&gt;&gt;}}</code><br>å¤šæ¡ä»¶æŸ¥è¯¢ï¼Œå¯ä»¥ç»„åˆå…¶ä»–æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ã€‚</td><td style="text-align:left;"><code>db.col.find({$or:[{&quot;name&quot;:&quot;å°æ˜&quot;},{&quot;age&quot;: &quot;18&quot;}]})</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>$type</code></td><td style="text-align:left;"><code>{&lt;key&gt;:{$type:&lt;value&gt;}}</code><br>ç±»å‹æ¯”è¾ƒï¼Œ<strong>Mongodbä¸­å­˜åœ¨çš„ç±»å‹ã€‚</strong></td><td style="text-align:left;"><code>db.col.find({&quot;title&quot; : {$type : &#39;string&#39;}})</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>$exists</code></td><td style="text-align:left;"><code>{&lt;key&gt;:{$exists:&lt;value&gt;}}</code><br>å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚</td><td style="text-align:left;"><code>db.col.find( { item : { $exists: false } } )</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">æ¨¡ç³ŠæŸ¥è¯¢</td><td style="text-align:left;">æ²¡æœ‰æ“ä½œç¬¦ï¼Œæ ¹æ®ä¹¦å†™è§„åˆ™æ¥å†³å®šæ˜¯å¦æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ã€‚<br> å’Œæ™®é€šisæŸ¥è¯¢ä¸€æ ·ï¼Œä½†æ˜¯å€¼éœ€è¦åŠ <code>//</code>ã€‚<br> likeï¼š<code>{name:/å°/}</code><br> likeBegin: <code>{name:/^å°/}</code><br> likeEnd:<code>{name:/å°^/}</code></td><td style="text-align:left;"><code>db.col.find( { item : /å°/} } )</code></td><td style="text-align:left;"><code>where name like &quot;%å°%&quot;</code></td></tr></tbody></table><h3 id="ç‰¹æ®ŠæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#ç‰¹æ®ŠæŸ¥è¯¢" aria-hidden="true">#</a> ç‰¹æ®ŠæŸ¥è¯¢</h3><h4 id="åµŒå¥—æ–‡æ¡£-æ–‡æ¡£æ•°ç»„æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#åµŒå¥—æ–‡æ¡£-æ–‡æ¡£æ•°ç»„æŸ¥è¯¢" aria-hidden="true">#</a> åµŒå¥—æ–‡æ¡£/æ–‡æ¡£æ•°ç»„æŸ¥è¯¢</h4><blockquote><p>å­—æ®µæ˜¯æ•°ç»„æˆ–å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨size.uomæ¥è¿›è¡Œæ“ä½œã€‚</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># æ–°å¢æ•°æ®</span>
db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span>insertMany<span class="token punctuation">(</span> <span class="token punctuation">[</span>
    { item: <span class="token string">&quot;journal&quot;</span><span class="token punctuation">,</span> qty: <span class="token number">25</span><span class="token punctuation">,</span> size: { h: <span class="token number">14</span><span class="token punctuation">,</span> w: <span class="token number">21</span><span class="token punctuation">,</span> uom: <span class="token string">&quot;cm&quot;</span> }<span class="token punctuation">,</span> <span class="token keyword">status</span>: <span class="token string">&quot;A&quot;</span> }<span class="token punctuation">,</span>
    { item: <span class="token string">&quot;notebook&quot;</span><span class="token punctuation">,</span> qty: <span class="token number">50</span><span class="token punctuation">,</span> size: { h: <span class="token number">8.5</span><span class="token punctuation">,</span> w: <span class="token number">11</span><span class="token punctuation">,</span> uom: <span class="token string">&quot;in&quot;</span> }<span class="token punctuation">,</span> <span class="token keyword">status</span>: <span class="token string">&quot;A&quot;</span> }<span class="token punctuation">,</span>
    { item: <span class="token string">&quot;paper&quot;</span><span class="token punctuation">,</span> qty: <span class="token number">100</span><span class="token punctuation">,</span> size: { h: <span class="token number">8.5</span><span class="token punctuation">,</span> w: <span class="token number">11</span><span class="token punctuation">,</span> uom: <span class="token string">&quot;in&quot;</span> }<span class="token punctuation">,</span> <span class="token keyword">status</span>: <span class="token string">&quot;D&quot;</span> }<span class="token punctuation">,</span>
    { item: <span class="token string">&quot;planner&quot;</span><span class="token punctuation">,</span> qty: <span class="token number">75</span><span class="token punctuation">,</span> size: { h: <span class="token number">22.85</span><span class="token punctuation">,</span> w: <span class="token number">30</span><span class="token punctuation">,</span> uom: <span class="token string">&quot;cm&quot;</span> }<span class="token punctuation">,</span> <span class="token keyword">status</span>: <span class="token string">&quot;D&quot;</span> }<span class="token punctuation">,</span>
    { item: <span class="token string">&quot;postcard&quot;</span><span class="token punctuation">,</span> qty: <span class="token number">45</span><span class="token punctuation">,</span> size: { h: <span class="token number">10</span><span class="token punctuation">,</span> w: <span class="token number">15.25</span><span class="token punctuation">,</span> uom: <span class="token string">&quot;cm&quot;</span> }<span class="token punctuation">,</span> <span class="token keyword">status</span>: <span class="token string">&quot;A&quot;</span> }
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># åµŒå¥—æ–‡æ¡£æŸ¥è¯¢ï¼Œsizeå¿…é¡»å®Œå…¨åŒ¹é…</span>
db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span>find<span class="token punctuation">(</span> { size: { h: <span class="token number">14</span><span class="token punctuation">,</span> w: <span class="token number">21</span><span class="token punctuation">,</span> uom: <span class="token string">&quot;cm&quot;</span> } } <span class="token punctuation">)</span>
<span class="token comment"># åµŒå¥—å­—æ®µæŸ¥è¯¢ï¼Œç›´æ¥æŸ¥è¯¢size.uomã€‚</span>
db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span>find<span class="token punctuation">(</span> { <span class="token string">&quot;size.uom&quot;</span>: <span class="token string">&quot;in&quot;</span> } <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="èšåˆæŸ¥è¯¢-aggregate" tabindex="-1"><a class="header-anchor" href="#èšåˆæŸ¥è¯¢-aggregate" aria-hidden="true">#</a> èšåˆæŸ¥è¯¢ aggregate()</h2><h3 id="ç®¡é“çš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#ç®¡é“çš„æ¦‚å¿µ" aria-hidden="true">#</a> ç®¡é“çš„æ¦‚å¿µ</h3><blockquote><p>ç®¡é“åœ¨Unixå’ŒLinuxä¸­ä¸€èˆ¬ç”¨äºå°†å½“å‰å‘½ä»¤çš„è¾“å‡ºç»“æœä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚</p><p>MongoDBçš„èšåˆç®¡é“å°†MongoDBæ–‡æ¡£åœ¨<strong>ä¸€ä¸ªç®¡é“å¤„ç†å®Œæ¯•åå°†ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ªç®¡é“å¤„ç†</strong>ã€‚ç®¡é“æ“ä½œæ˜¯å¯ä»¥é‡å¤çš„ã€‚</p><p>è¡¨è¾¾å¼ï¼šå¤„ç†è¾“å…¥æ–‡æ¡£å¹¶è¾“å‡ºã€‚è¡¨è¾¾å¼æ˜¯æ— çŠ¶æ€çš„ï¼Œåªèƒ½ç”¨äºè®¡ç®—å½“å‰èšåˆç®¡é“çš„æ–‡æ¡£ï¼Œä¸èƒ½å¤„ç†å…¶å®ƒçš„æ–‡æ¡£ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹èšåˆæ¡†æ¶ä¸­å¸¸ç”¨çš„å‡ ä¸ªæ“ä½œï¼š</p><ul><li><code>$project</code>ï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚</li><li><code>$match</code>ï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚<code>$â€‹match</code>ä½¿ç”¨MongoDBçš„æ ‡å‡†æŸ¥è¯¢æ“ä½œã€‚</li><li><code>$limit</code>ï¼šç”¨æ¥é™åˆ¶MongoDBèšåˆç®¡é“è¿”å›çš„æ–‡æ¡£æ•°ã€‚</li><li><code>$skip</code>ï¼šåœ¨èšåˆç®¡é“ä¸­è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œå¹¶è¿”å›ä½™ä¸‹çš„æ–‡æ¡£ã€‚</li><li><code>$unwind</code>ï¼šå°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚</li><li><code>$group</code>ï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚</li><li><code>$sort</code>ï¼šå°†è¾“å…¥æ–‡æ¡£æ’åºåè¾“å‡ºã€‚</li><li><code>$geoNear</code>ï¼šè¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚</li></ul></blockquote><h3 id="project" tabindex="-1"><a class="header-anchor" href="#project" aria-hidden="true">#</a> <code>$project</code></h3><blockquote><p><code>$project</code>ï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚</p></blockquote><h4 id="æ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#æ“ä½œç¬¦" aria-hidden="true">#</a> æ“ä½œç¬¦</h4>`,40),k=n("thead",null,[n("tr",null,[n("th",null,"è¡¨è¾¾å¼"),n("th",null,"æè¿°"),n("th",null,"å®ä¾‹")])],-1),m=n("tr",null,[n("td",null,[n("code",null,"$unwind")]),n("td",null,[s("å°†é›†åˆå­—æ®µå¹³é“ºã€‚æ•°æ®ä¼šä»"),n("code",null,'{"data":[{count:1},{count:2}]}'),s("ï¼Œå˜ä¸º"),n("code",null,'{"data":{count:1}},{"data":{count:2}}')]),n("td",null,[n("code",null,"db.col.aggregate([{$unwind:'$data'}])")])],-1),b={href:"https://links.jianshu.com/go?to=https%3A%2F%2Fdocs.mongodb.com%2Fmanual%2Freference%2Foperator%2Faggregation%2Fadd%2F",target:"_blank",rel:"noopener noreferrer"},v=n("td",null,[n("code",null,"{ $add ï¼š [ < expression1 > ï¼Œ < expression2 > ï¼Œ ... ] }"),n("br"),s("å¤šå€¼ç›¸åŠ ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚")],-1),g=n("td",null,[n("code",null,"db.col.aggregate([{$project:{size:{$add:['$size1','$size2','$size3']}}}])")],-1),h={href:"https://links.jianshu.com/go?to=https%3A%2F%2Fdocs.mongodb.com%2Fmanual%2Freference%2Foperator%2Faggregation%2Fsubtract%2Findex.html",target:"_blank",rel:"noopener noreferrer"},f=n("td",null,[n("code",null,"{ $subtract: [ <expression1>, <expression2> ] }"),n("br"),s("expression1å‡å»expression2ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚"),n("em",null,"åªèƒ½ä¸¤å€¼ç›¸å‡ï¼Œå¤šå€¼ç›¸å‡éœ€è¦åµŒå¥—ä½¿ç”¨ã€‚")],-1),y=n("td",null,[n("code",null,"db.col.aggregate([{$project:{size:{$subtract:['$size1','$size2']}}}])")],-1),q={href:"https://links.jianshu.com/go?to=https%3A%2F%2Fdocs.mongodb.com%2Fmanual%2Freference%2Foperator%2Faggregation%2Fmultiply%2F%23exp._S_multiply",target:"_blank",rel:"noopener noreferrer"},x=n("td",null,[n("code",null,"{ $multiply ï¼š [ < expression1 > ï¼Œ < expression2 > ï¼Œ ... ] }"),n("br"),s("å¤šå€¼ç›¸ä¹˜ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚")],-1),$=n("td",null,[n("code",null,"db.size_test.aggregate([{$project:{size:{$multiply:['$size1','$size2','$size3',100]}}}])")],-1),w={href:"https://links.jianshu.com/go?to=https%3A%2F%2Fdocs.mongodb.com%2Fmanual%2Freference%2Foperator%2Faggregation%2Fdivide%2Findex.html",target:"_blank",rel:"noopener noreferrer"},_=n("td",null,[n("code",null,"{ $divide: [ <expression1>, <expression2> ] }"),n("br"),s("expression1ä¸ºè¢«é™¤æ•°ï¼Œexpression2ä¸ºé™¤æ•°ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚"),n("em",null,"åªèƒ½ä¸¤å€¼ç›¸é™¤ï¼Œå¤šå€¼ç›¸é™¤éœ€è¦åµŒå¥—ä½¿ç”¨ã€‚")],-1),j=n("td",null,[n("code",null,"db.col.aggregate([{$project:{size:{$divide:['$size1','$size2']}}}])")],-1),T=n("td",null,[n("code",null,"$ifNull")],-1),S=n("code",null,"{ $ifNull: [ expression, replacement-expression-if-null ] }",-1),C={href:"https://so.csdn.net/so/search?q=%E8%A1%A8%E8%BE%BE%E5%BC%8F&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"},D=n("td",null,[n("code",null,"db.col.aggregate([{$project:{size:{$ifNull:['$size1',100]}}}])")],-1),O=n("h4",{id:"æ—¶é—´è½¬æ¢æ“ä½œç¬¦",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#æ—¶é—´è½¬æ¢æ“ä½œç¬¦","aria-hidden":"true"},"#"),s(" æ—¶é—´è½¬æ¢æ“ä½œç¬¦")],-1),M=n("thead",null,[n("tr",null,[n("th",null,"è¡¨è¾¾å¼"),n("th",null,"æè¿°"),n("th",null,"å®ä¾‹")])],-1),z=n("td",null,[n("code",null,"new Date()")],-1),F=n("br",null,null,-1),I=n("strong",null,"æ—¥æœŸæ ¼å¼ï¼šyyyy-MM-ddThh:mm:ssZ",-1),B=n("td",null,[n("code",null,"new Date()")],-1),N=n("td",null,[n("code",null,"ISODate")],-1),A=n("strong",null,"å¯ä»¥ä¸æŒ‰ç…§æ ‡å‡†çš„æ—¥æœŸæ ¼å¼",-1),H=n("td",null,[n("code",null,'db.col.find({time:{$gt:ISODate("20210101")}})')],-1),E=n("tr",null,[n("td",null,[n("code",null,"$year")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºå¹´ã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$year:'$createTime'}}}])")])],-1),L=n("tr",null,[n("td",null,[n("code",null,"$month")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºæœˆã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$month:'$createTime'}}}])")])],-1),U=n("tr",null,[n("td",null,[n("code",null,"$week")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºå‘¨ï¼Œå½“å¹´çš„ç¬¬å‡ å‘¨ã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$week:'$createTime'}}}])")])],-1),W=n("tr",null,[n("td",null,[n("code",null,"$dayOfYear")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºæ—¥ï¼Œå½“å¹´çš„ç¬¬å‡ å¤©ã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$dayOfYear:'$createTime'}}}])")])],-1),P=n("tr",null,[n("td",null,[n("code",null,"$dayOfMonth")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºæ—¥ï¼Œå½“æœˆçš„ç¬¬å‡ å¤©ã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$dayOfMonth:'$createTime'}}}])")])],-1),K=n("tr",null,[n("td",null,[n("code",null,"$dayOfWeek")]),n("td",null,[s("æ—¶é—´è½¬æ¢ä¸ºæ—¥ï¼Œå½“å‘¨çš„ç¬¬å‡ å¤©ã€‚"),n("br"),s("æ˜ŸæœŸæ—¥ä¸º1ï¼Œæ˜ŸæœŸå…­ä¸º7ã€‚")]),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$dayOfWeek:'$createTime'}}}])")])],-1),R=n("tr",null,[n("td",null,[n("code",null,"$hour")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºå°æ—¶ï¼Œå½“å¤©çš„ç¬¬å‡ å°æ—¶ã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$hour:'$createTime'}}}])")])],-1),V=n("tr",null,[n("td",null,[n("code",null,"$minute")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºåˆ†é’Ÿï¼Œå½“å‰å°æ—¶çš„ç¬¬å‡ åˆ†é’Ÿã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$minute:'$createTime'}}}])")])],-1),Y=n("tr",null,[n("td",null,[n("code",null,"$second")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºç§’ï¼Œå½“å‰åˆ†é’Ÿçš„ç¬¬å‡ ç§’ã€‚"),n("td",null,[n("code",null,"db.HouseHold.aggregate([{$project: {createTime:{$second:'$createTime'}}}])")])],-1),Z=n("tr",null,[n("td",null,[n("code",null,"$millisecond")]),n("td",null,"æ—¶é—´è½¬æ¢ä¸ºæ¯«ç§’ï¼Œå½“å‰ç§’çš„ç¬¬å‡ æ¯«ç§’ã€‚"),n("td",null,"`db.HouseHold.aggregate([{$project: {createTime:{$millisecond:'$createTime'}}}])")],-1),Q={href:"https://mongodb.net.cn/manual/reference/operator/aggregation/dateToString/",target:"_blank",rel:"noopener noreferrer"},G=p(`<blockquote><p><code>$dateToString</code>:è‡ªå®šä¹‰æ—¶é—´è½¬æ¢</p></blockquote><p>å‚æ•°æè¿°</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>{ $dateToString: {
    <span class="token keyword">date</span>: <span class="token operator">&lt;</span>dateExpression<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    format: <span class="token operator">&lt;</span>formatString<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    timezone: <span class="token operator">&lt;</span>tzExpression<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    onNull: <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span>
} }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å­</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>db<span class="token punctuation">.</span>getCollection<span class="token punctuation">(</span><span class="token string">&#39;HouseHold&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>
    {$project:
        {
            <span class="token keyword">year</span>:{$dateToString: { format: <span class="token string">&quot;%Y&quot;</span><span class="token punctuation">,</span> <span class="token keyword">date</span>: <span class="token string">&quot;$createTime&quot;</span> }}<span class="token punctuation">,</span>
            dayofweek:{$dateToString: { format: <span class="token string">&quot;%w&quot;</span><span class="token punctuation">,</span> <span class="token keyword">date</span>: <span class="token string">&quot;$createTime&quot;</span> }}<span class="token punctuation">,</span>
            weekofyear:{$dateToString: { format: <span class="token string">&quot;%U&quot;</span><span class="token punctuation">,</span> <span class="token keyword">date</span>: <span class="token string">&quot;$createTime&quot;</span> }}<span class="token punctuation">,</span>
            <span class="token keyword">year</span>:{$dateToString: { format: <span class="token string">&quot;%Y-%m-%dT%H:%M&quot;</span><span class="token punctuation">,</span> <span class="token keyword">date</span>: <span class="token string">&quot;$createTime&quot;</span> }}<span class="token punctuation">,</span>
            onNull:{$dateToString: { <span class="token keyword">date</span>: <span class="token boolean">null</span><span class="token punctuation">,</span> onNull: <span class="token string">&quot;No date supplied&quot;</span> } }
        }}
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pretty<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“æœ</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> ObjectId(<span class="token string">&quot;60fa3b3635f8c5790b880297&quot;</span>)<span class="token punctuation">,</span>
    <span class="token property">&quot;year&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2021&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dayofweek&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;weekofyear&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;30&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;UTC&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2021-07-29T09:10&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;onNull&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;No date supplied&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://file.pandacode.cn//blog/202109111301481.png" alt="img"></p><p>æ‰©å±•</p><blockquote><p>å¯ä»¥ä½¿ç”¨<code>$dateToString</code>ä» ObjectId è¿”å›æ—¥æœŸå­—ç¬¦ä¸²ã€‚</p><p>ObjectId å€¼æ˜¯ 12 å­—èŠ‚çš„åå…­è¿›åˆ¶å€¼ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>ä¸€ä¸ª 4 å­—èŠ‚çš„æ—¶é—´æˆ³å€¼ï¼Œè¡¨ç¤º ObjectId çš„åˆ›å»ºï¼Œä»¥ Unix çºªå…ƒä»¥æ¥çš„ç§’æ•°ä¸ºå•ä½ã€‚</li><li>ä¸€ä¸ª 5 å­—èŠ‚æ˜¯ä¸€ä¸ªéšæœºå€¼</li><li>ä¸€ä¸ª 3 å­—èŠ‚é€’å¢è®¡æ•°å™¨ï¼Œåˆå§‹åŒ–ä¸ºéšæœºå€¼ã€‚</li></ul><p>å›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
	&quot;_id&quot; : ObjectId(&quot;600631c7c8eb4369cf6ad9c8&quot;),
	&quot;name&quot; : &quot;è·å–&quot;,
	â€œå‡ºç”Ÿâ€ï¼šISODateï¼ˆâ€œ2020-12-31T23ï¼š30ï¼š15.123Zâ€ï¼‰
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥æ–‡æ¡£åŒ…å«ä¸€ä¸ª ObjectIdã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥<code>$dateToString</code>æ ¹æ®æ–‡æ¡£çš„åˆ›å»ºæ—¥æœŸï¼ˆæˆ–æ›´å…·ä½“åœ°è¯´ï¼Œ<code>_id</code>å­—æ®µçš„ ObjectId å€¼çš„åˆ›å»ºæ—¥æœŸï¼‰è¿”å›ä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²ã€‚</p><p>ä¾‹å­ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>db.pets.aggregate(
   [
     {
       $project: {
          timestamp: { $toDate: &quot;$_id&quot; },
          dateString: { $dateToString: { format: &quot;%d-%m-%Y&quot;, date: &quot;$_id&quot; } }
       }
     }
   ]
).pretty()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
	&quot;_id&quot; : ObjectId(&quot;600631c7c8eb4369cf6ad9c8&quot;),
	&quot;æ—¶é—´æˆ³&quot; : ISODate(&quot;2021-01-19T01:11:35Z&quot;),
	â€œæ—¥æœŸå­—ç¬¦ä¸²â€ï¼šâ€œ19-01-2021â€
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å†³å®šåªè¿”å›æ—¥æœŸéƒ¨åˆ†ï¼ˆè€Œä¸æ˜¯æ—¶é—´éƒ¨åˆ†ï¼‰ã€‚æˆ‘è¿˜æ”¹å˜äº†å¤©ã€æœˆå’Œå¹´çš„é¡ºåºï¼Œä»¥è¯æ˜å¦‚æœéœ€è¦ï¼Œæ‚¨å½“ç„¶å¯ä»¥è¿™æ ·åšã€‚</p></blockquote><h3 id="group" tabindex="-1"><a class="header-anchor" href="#group" aria-hidden="true">#</a> <code>$group</code></h3><blockquote><p><code>$group</code>ï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚</p><p><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, ........}}])</code></p></blockquote><table><thead><tr><th style="text-align:left;">è¡¨è¾¾å¼</th><th style="text-align:left;">æè¿°</th><th style="text-align:left;">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:left;"><code>$sum</code></td><td style="text-align:left;">è®¡ç®—æ€»å’Œã€‚</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$sum : &quot;$likes&quot;}}}])</code></td></tr><tr><td style="text-align:left;"><code>$avg</code></td><td style="text-align:left;">è®¡ç®—å¹³å‡å€¼</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$avg : &quot;$likes&quot;}}}])</code></td></tr><tr><td style="text-align:left;"><code>$min</code></td><td style="text-align:left;">è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$min : &quot;$likes&quot;}}}])</code></td></tr><tr><td style="text-align:left;"><code>$max</code></td><td style="text-align:left;">è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, num_tutorial : {$max : &quot;$likes&quot;}}}])</code></td></tr><tr><td style="text-align:left;"><code>$push</code></td><td style="text-align:left;">åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, url : {$push: &quot;$url&quot;}}}])</code></td></tr><tr><td style="text-align:left;"><code>$addToSet</code></td><td style="text-align:left;">åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ã€‚</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, url : {$addToSet : &quot;$url&quot;}}}])</code></td></tr><tr><td style="text-align:left;"><code>$first</code></td><td style="text-align:left;">æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, first_url : {$first : &quot;$url&quot;}}}])</code></td></tr><tr><td style="text-align:left;"><code>$last</code></td><td style="text-align:left;">æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ®</td><td style="text-align:left;"><code>db.col.aggregate([{$group : {_id : &quot;$by_user&quot;, last_url : {$last : &quot;$url&quot;}}}])</code></td></tr></tbody></table><h2 id="æ–°å¢" tabindex="-1"><a class="header-anchor" href="#æ–°å¢" aria-hidden="true">#</a> æ–°å¢</h2><h3 id="æ–°å¢å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ–°å¢å‡½æ•°" aria-hidden="true">#</a> æ–°å¢å‡½æ•°</h3><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td><code>insertOne()</code></td><td>æ–°å¢ä¸€æ¡ã€‚</td><td><code>db.col.insertOne({&quot;name&quot;:&quot;123&quot;})</code></td></tr><tr><td><code>insertMany()</code></td><td>æ–°å¢å¤šæ¡ã€‚</td><td><code>db.col.insertMany([{&quot;name&quot;:&quot;å°æ˜&quot;,&quot;age&quot;:29},{&quot;name&quot;:&quot;å°çº¢&quot;,&quot;age&quot;:32}])</code></td></tr><tr><td><code>save()</code></td><td>å¯åŒæ—¶æ·»åŠ å¤šä¸ªæ–‡æ¡£ã€‚<br>ä¹Ÿèƒ½å¤Ÿæ›´æ–°æ•°æ®ï¼Œä½†åªèƒ½æ›´æ–°ä¸€æ¡ã€‚</td><td><code>db.col.save({&quot;name&quot;:&quot;123&quot;})</code></td></tr></tbody></table><h2 id="ä¿®æ”¹" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹" aria-hidden="true">#</a> ä¿®æ”¹</h2><h3 id="ä¿®æ”¹å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹å‡½æ•°" aria-hidden="true">#</a> ä¿®æ”¹å‡½æ•°</h3><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td><code>update()</code></td><td><code>db.collection.update(&lt;query&gt;,&lt;update&gt;,{upsert: &lt;boolean&gt;,multi: &lt;boolean&gt;,writeConcern:&lt;document&gt;})</code><br> å‚æ•°è¯´æ˜ï¼š<br><strong>query</strong> : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚<br> <strong>update</strong> : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$inc...ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„<br> <strong>upsert</strong> : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚<br> <strong>multi</strong> : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚<br> <strong>writeConcern</strong> :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</td><td><code>db.col.update( { &quot;count&quot; : { $gt : 3 } } , { $set : { &quot;test2&quot; : &quot;OK&quot;} },false,true );</code></td></tr><tr><td><code>updateOne()</code></td><td>å³ä½¿å¤šä¸ªæ–‡æ¡£å¯èƒ½ä¸æŒ‡å®šçš„è¿‡æ»¤å™¨åŒ¹é…ï¼Œæœ€å¤šæ›´æ–°ä¸æŒ‡å®šçš„è¿‡æ»¤å™¨åŒ¹é…çš„å•ä¸ªæ–‡æ¡£ã€‚</td><td></td></tr><tr><td><code>updateMany()</code></td><td>æ›´æ–°æ‰€æœ‰ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚</td><td></td></tr><tr><td><code>replaceOne()</code></td><td>å³ä½¿å¤šä¸ªæ–‡æ¡£å¯èƒ½ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…ï¼Œä¹Ÿæœ€å¤šæ›¿æ¢ä¸€ä¸ªä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚</td><td></td></tr></tbody></table><h3 id="ä¿®æ”¹æ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹æ“ä½œç¬¦" aria-hidden="true">#</a> ä¿®æ”¹æ“ä½œç¬¦</h3><h4 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> <code>$set</code></h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>{ $<span class="token keyword">set</span>: { <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span>: <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> } }
<span class="token comment"># ä¾‹å­</span>
db<span class="token punctuation">.</span>col<span class="token punctuation">.</span><span class="token keyword">update</span><span class="token punctuation">(</span>
   { _id: <span class="token number">100</span> }<span class="token punctuation">,</span>
   { $<span class="token keyword">set</span>:
      {
        quantity: <span class="token number">500</span><span class="token punctuation">,</span>
        details: { model: <span class="token string">&quot;14Q3&quot;</span><span class="token punctuation">,</span> make: <span class="token string">&quot;xyz&quot;</span> }<span class="token punctuation">,</span>
        tags: <span class="token punctuation">[</span> <span class="token string">&quot;coats&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;outerwear&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clothing&quot;</span> <span class="token punctuation">]</span>
      }
   }
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤" aria-hidden="true">#</a> åˆ é™¤</h2><h3 id="æ™®é€šåˆ é™¤" tabindex="-1"><a class="header-anchor" href="#æ™®é€šåˆ é™¤" aria-hidden="true">#</a> æ™®é€šåˆ é™¤</h3><h4 id="remove" tabindex="-1"><a class="header-anchor" href="#remove" aria-hidden="true">#</a> remove()</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># api</span>
db<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>
   <span class="token operator">&lt;</span>query<span class="token operator">&gt;</span><span class="token punctuation">,</span>
   {
     justOne: <span class="token operator">&lt;</span><span class="token keyword">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
     writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>
   }
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul><li><strong>query</strong> :ï¼ˆå¯é€‰ï¼‰åˆ é™¤çš„æ–‡æ¡£çš„æ¡ä»¶ã€‚</li><li><strong>justOne</strong> : ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœä¸è®¾ç½®è¯¥å‚æ•°ï¼Œæˆ–ä½¿ç”¨é»˜è®¤å€¼ falseï¼Œåˆ™åˆ é™¤æ‰€æœ‰åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£ã€‚</li><li><strong>writeConcern</strong> :ï¼ˆå¯é€‰ï¼‰æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># ä¾‹å­</span>
db<span class="token punctuation">.</span>col<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>{<span class="token string">&#39;title&#39;</span>:<span class="token string">&#39;abc&#39;</span>}<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="deleteone" tabindex="-1"><a class="header-anchor" href="#deleteone" aria-hidden="true">#</a> deleteOne()</h4><blockquote><p>å³ä½¿å¤šä¸ªæ–‡æ¡£å¯èƒ½ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…ï¼Œä¹Ÿæœ€å¤šåˆ é™¤ä¸€ä¸ªä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚</p></blockquote><h4 id="deletemany" tabindex="-1"><a class="header-anchor" href="#deletemany" aria-hidden="true">#</a> deleteMany()</h4><blockquote><p>åˆ é™¤æ‰€æœ‰ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚</p></blockquote>`,33);function J(X,nn){const t=o("ExternalLinkIcon"),e=o("font");return i(),d("div",null,[r,n("table",null,[k,n("tbody",null,[m,n("tr",null,[n("td",null,[n("a",b,[s("$add"),a(t)])]),v,g]),n("tr",null,[n("td",null,[n("a",h,[s("$subtract"),a(t)])]),f,y]),n("tr",null,[n("td",null,[n("a",q,[s("$multiply"),a(t)])]),x,$]),n("tr",null,[n("td",null,[n("a",w,[s("$divide"),a(t)])]),_,j]),n("tr",null,[T,n("td",null,[S,s("ï¼šç”¨äºåˆ¤æ–­ç¬¬ä¸€ä¸ª"),n("a",C,[s("è¡¨è¾¾å¼"),a(t)]),s("æ˜¯å¦ä¸º nullï¼Œå¦‚æœä¸º null åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ï¼Œå¦‚æœä¸ä¸º null åˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚")]),D])])]),O,n("table",null,[M,n("tbody",null,[n("tr",null,[z,n("td",null,[s("æ—¶é—´åˆ›å»ºï¼Œå¿…é¡»æŒ‰ç…§æ ‡å‡†çš„æ—¥æœŸæ ¼å¼ã€‚"),F,a(e,{color:"#FF000"},{default:l(()=>[I]),_:1})]),B]),n("tr",null,[N,n("td",null,[a(e,{color:"#FF000"},{default:l(()=>[A]),_:1})]),H]),E,L,U,W,P,K,R,V,Y,Z])]),n("p",null,[n("a",Q,[s("$dateToString"),a(t)])]),G])}const an=c(u,[["render",J],["__file","02.mongodb-command.html.vue"]]);export{an as default};
